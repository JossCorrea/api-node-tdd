if (self.CavalryLogger) { CavalryLogger.start_js(["klKt8"]); }

__d("MessengerStoryAttachmentTransformer.bs",["fbt","URI","bs_string","bs_js_dict","bs_caml_array","bs_belt_Option","bs_caml_format","bs_caml_option","CurrentUser","FundsAvailability","bs_js_null_undefined","P2PTransferStatus","MNCommerceBubbleType","PaymentModulesClient","MercuryAttachmentType","bs_caml_builtin_exceptions","P2PPaymentRequestStatus","ServicesCalendarSyncType","MNCommerceCallToActionType","LeadGenInfoFieldTypes"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){return a.map(function(a){var c=a.user_confirmation;c=c==null?[null,null,null,null,!1]:[c.cancel_button_label,c.continue_button_label,c.confirmation_message,c.confirmation_title,!0];var d=a.payment_metadata;return{action_link:a.action_link,action_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MNCommerceCallToActionType"),a.action_open_type)),action_objects:a.action_objects,title:a.title,confirmation_cancel_label:c[0],confirmation_continue_label:c[1],confirmation_message:c[2],confirmation_title:c[3],id:a.id,is_disabled:a.is_disabled,is_mutable_by_server:a.is_mutable_by_server,logging_token:a.logging_token,payment_metadata:d==null?{payment_module_config:null,total_price:null}:{payment_module_config:d.payment_module_config,total_price:d.total_price},render_style:a.render_style,webview_metadata:{fallback_url:a.webview_metadata.fallback_url,messenger_extensions:a.webview_metadata.messenger_extensions,webview_height_ratio:a.webview_metadata.webview_height_ratio,webview_share_button:a.webview_metadata.webview_share_button},should_show_user_confirmation:c[4],page_id:a.page_id}})}function j(a){return a.map(function(a){var c=a.url;c=c==null?null:new(h||(h=b("URI")))(c).getUnqualifiedURI().toString();return{title:a.title,uri:c}})}function a(a){if(!(a==null)&&a!=="")return"#"+b("bs_string").sub(a,2,a.length-2|0);else return null}function c(a){if(a==null)return null;else return{url:a.uri,src:a.uri,width:a.width,height:a.height}}function k(a,b){var c=b.cover_photo,d;if(c==null)d=[null,null,null];else{var e=c.photo.image;e=e==null?[null,null]:[e.uri,{height:e.height,width:e.width}];d=[c.photo.id,e[0],e[1]]}c=b.location;e=c==null?[null,null]:[c.latitude,c.longitude];c=b.overall_star_rating;return{address:b.address.single_line_full_address,category:b.top_category_name,coverPhotoID:d[0],coverPhotoURL:d[1],coverPhotoDimensions:d[2],latitude:e[0],longitude:e[1],name:b.name,rating:c==null?null:c.value,pageID:b.id,priceRange:b.price_range_description,viewerID:a}}function l(a){var b=a.group_commerce_item_seller,c=a.primary_photo,d;if(c==null)d=null;else{c=c.image;d=c==null?null:c.uri}return{caption:a.group_commerce_item_description.text,desc:a.group_commerce_item_description.text,owner_id:b==null?null:b.id,price:a.formatted_price.text,text:a.group_commerce_item_description.text,title:a.group_commerce_item_title,thumb_url:d,url:a.url}}function m(a){return{app_name:a.application_name,artists:a.artist_names,audio_url:a.audio_url,duration_ms:a.duration_ms,title:a.music_title}}function n(a){var c=a.payment;return{id:a.id,desc:a.desc,display_total_cost:a.total_cost,merchant_name:a.merchant_name,target_url:a.target_url,thumb_url:a.thumb_url,raw_amount:a.raw_amount,payment_id:c==null?null:c.id,total_cost:{amount:b("bs_caml_format").caml_float_of_string(a.price_amount),currency:a.price_currency},name:a.name}}function o(a){return{fundraiserID:a.fundraiserID,canDonate:a.canDonate,hasViewerDonated:a.hasViewerDonated,fundraiserDetailedProgressText:a.fundraiserDetailedProgressText,fundraiserSubtitleText:a.fundraiserSubtitleText,focusedCoverPhoto:a.focusedCoverPhoto}}function p(a){return{id:a.id,name:a.name,is_malicious:a.is_malicious,attach_type:b("MercuryAttachmentType").FILE,url:a.uri,extension:a.extension,filesize:a.filesize}}function q(a){return{id:a.id,url_shimhash:a.url_shimhash,attach_type:b("MercuryAttachmentType").VIDEO,url:a.playable_url,extension:a.extension,filesize:a.filesize,name:a.filename,height:a.height,width:a.width}}function r(a){return{id:a.id,name:a.name,desc:a.desc,thumb_url:a.thumb_url,item_url:a.item_url,title:a.name,text:a.desc,source:a.source,image_aspect_ratio:a.image_aspect_ratio,metalines:{metaline_1:a.first_metaline,metaline_2:a.second_metaline,metaline_3:a.third_metaline},default_action:a.default_action,call_to_actions:i(a.call_to_actions)}}function s(a){var c=function(a){a=a.services_vertical_info;if(a==null)return;else return{isEligibleForAppointmentCalendar:a.is_eligible_for_appointment_calendar,timezoneName:a.time_zone_name}},d=a.page;c=d==null?[void 0,void 0,void 0]:[d.id,b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("ServicesCalendarSyncType"),d.calendar_sync_type)),c(d)];d=a.native_component_flow_request;var e;if(d==null)e=null;else{var f=d.page,h=d.page,i=d.page,j;if(i==null)j=void 0;else{i=i.profile_picture;j=i==null?void 0:i.uri}i=d.suggested_time_range;var k=d.user,l=d.user,m=d.job_application,n=d.user,o;if(n==null)o=void 0;else{n=n.profile_picture;o=n==null?void 0:n.uri}e={additionalInfo:d.additional_info,appointmentAddress:d.appointment_address,archivedStatus:d.archived_status,availability:d.availability,consumer_phone_number:d.consumer_phone_number,hasSavedToCalendar:d.has_saved_to_calendar,recurMessage:d.recur_message,requestFlowType:d.request_flow_type,generalInfo:d.service_general_info,id:d.id,pageID:f==null?void 0:f.id,pageName:h==null?void 0:h.name,pageProfilePic:j,preferredTimeRange:i==null?null:{end:i.end,start:i.start},productItems:d.services_product_items,reminderBubbleText:d.reminder_bubble_text,requestAdminApprovalType:d.request_admin_approval_type,requestedTime:d.requested_time,specialRequest:d.special_request,status:d.booking_status_value,statusLabel:d.status,subtitle:d.ls_xma_subtitle,title:d.ls_xma_title,userID:k==null?void 0:k.id,username:l==null?void 0:l.short_name,jobApplicationID:m==null?void 0:m.id,userProfilePic:o}}n=a.message_bubble_type;var p;switch(n){case"CANCELLED":p=["Cancelled",g._("Cancelada")];break;case"DECLINED":p=["Declined",g._("Recusada")];break;case"REQUESTED":p=["Requested",g._("Solicitada")];break;case"SCHEDULEED":p=["Scheduled",g._("Programado")];break;default:throw[b("bs_caml_builtin_exceptions").invalid_argument,"Erroneous target status"]}f=a.user;return{id:a.id,pageID:c[0],calendarSyncType:c[1],userID:f==null?"0":f.id,status:p[0],statusLabel:p[1],viewerID:b("CurrentUser").getAccountID(),requestMetadata:e,servicesVerticalInfo:c[2]}}function t(a){return{id:a.id,page_id:a.page.id,user_id:a.consumer.id,time_ranges:a.formatted_available_time_ranges.map(function(a){return{start:a.start,end:a.end}}),has_booking_request_created:a.has_booking_request_created}}function u(a){return{id:a.id}}function v(a){return{live_location_id:a.live_location_id,is_expired:a.is_expired,expiration_time:a.expiration_time,sender:a.sender,coordinate:a.coordinate,location_title:a.location_title,sender_destination:a.sender_destination,stop_reason:a.stop_reason}}function w(a){return{sender_wec_number:a.sender_wec_number,sender_wec_number_formated:a.sender_wec_number_formated,sender_wec_number_fbid:a.sender_wec_number_fbid,sender_wec_name:a.sender_wec_name}}function x(a){var b=a.preview;b=b==null?null:b.uri;var c=a.large_preview;c=c==null?null:c.uri;return{id:a.id,extension:a.extension,preview:a.preview,large_preview:a.large_preview,attach_type:"photo",large_preview_url:c,preview_url:b}}function y(a){return{id:a.id,name:a.filename,url_shimhash:a.url_shimhash,attach_type:b("MercuryAttachmentType").AUDIO,url:a.playable_url,extension:a.extension,filesize:a.filesize,duration:a.duration}}function z(a){var b=a.first_metaline;return{desc:a.description,id:a.id,image_aspect_ratio:a.image_aspect_ratio,item_url:a.target_url,metalines:b==null?{}:{metaline_1:b},name:a.name,source:a.source_name,text:a.description,thumb_url:a.image_url,title:a.name,default_action:a.default_action,call_to_actions:i(a.call_to_actions),media_blob_attachments:a.media_blob_attachments}}function A(a){var b=a.business_items.nodes.map(z),c=i(a.call_to_actions);return{message:a.message,call_to_actions:c,items:b}}function B(a){return{message:a.message,call_to_actions:i(a.call_to_actions),items:a.promotion_items.nodes.map(z)}}function C(a){var c=a.structured_address.streets,d=a.partner_logo;return{account_holder_name:a.account_holder_name,adjustments:a.adjustments.map(function(a){return{adjustment_type:a.adjustment_type,display_adjustment_amount:a.adjustment_amount}}),cancellation_url:a.cancellation_url,items:a.items.nodes.map(z),merchant_name:a.merchant_name,messenger_commerce_bubble_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MNCommerceBubbleType"),a.messenger_commerce_bubble_type)),order_id:a.order_id,order_time:a.order_time,order_url:a.order_url,payment_method:a.payment_method,receipt_id:a.receipt_id,recipient_name:a.recipient_name,shipping_cost:a.shipping_cost,shipping_method:a.shipping_method,status:a.status,structured_address:{city:a.structured_address.city,state:a.structured_address.state,country:a.structured_address.country,postal_code:a.structured_address.postal_code,street_1:b("bs_caml_array").caml_array_get(c,0),street_2:b("bs_caml_array").caml_array_get(c,1)},subtotal:a.subtotal,total_cost:a.total_cost,total_tax:a.total_tax,partner_logo:d==null?void 0:d.uri}}function D(a,c){return{payment_modules_client:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("PaymentModulesClient"),c.payment_modules_client)),is_viewer_seller:c.is_viewer_seller,payment_snippet:c.payment_snippet,item_list:c.item_list.map(function(a){return{item_id:a.item_id,name:a.name,subtitle:a.subtitle,description:a.description,unit_price:a.unit_price,image_urls:a.images.map(function(a){return a.uri}),quantity:a.quantity}}),components:c.components,payment_call_to_actions:c.payment_call_to_actions,click_action:c.click_action,summary_action:c.summary_action,actor_id:a,invoicer_id:c.invoicer_id,is_last_attachment:c.is_last_attachment}}var E=function(a){var c=b("LeadGenInfoFieldTypes"),d={},e=[];for(var a=a.field_data_list,f=Array.isArray(a),g=0,a=f?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=a.length)break;h=a[g++]}else{g=a.next();if(g.done)break;h=g.value}h=h;var i=h.field_type,j=h.label;h=h.values;i===c.CUSTOM||i===c.ZIP?e.push({label:j,values:h}):d[i]={label:j,values:h}}d.questions=e;return d};function F(a,b){var c=b.invite_recipient;c=c==null?null:c.id;var d=b.invite_sender;d=d==null?null:d.id;return{quick_invite_id:b.id,recipient_id:c,sender_id:d,is_viewer_recipient:a===c}}function G(a){var b=function(a){if(a==null)return null;else return a.uri},c=a.listing_category;c=c==null?[null,null]:[c.offer_image,c.request_image];return{listingType:a.listing_type,mapURI:b(a.map_image),offerURI:b(c[0]),requestURI:b(c[1])}}function H(a){return{sender:a.sender,receiver:a.receiver,transfer_id:a.transfer_id,bubbleView:a.bubble_view}}function I(a){var c=a.receiver_profile,d;if(c==null)d=null;else{var e=c.profile_picture;d={id:c.id,name:c.short_name,full_name:c.name,picture:e==null?null:e.uri,profile_url:c.url}}e=a.sender;if(e==null)c={};else{var f=e.profile_picture;c={id:e.id,name:e.name,full_name:e.full_name,picture:f==null?null:f.uri,profile_uri:e.url}}f=a.transfer_context;if(f==null)e=[null,null,null];else{var g=f.transfer_theme;e=[f.memoText,f.memo_images.map(function(a){a=a.image;if(a==null)return null;else return a.uri}),g==null?null:g.id]}f=a.platform_item;g=f==null?null:{name:f.name,description:f.description,image:f.photos.map(function(a){a=a.image;if(a==null)return null;else return a.uri}),refURL:f.url};f=a.amount_fb_discount;return{sender:c,amountWithSymbol:a.transaction_amount.formatted_amount,status:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("P2PTransferStatus"),a.transfer_status)),receiver:d,transfer_id:a.transfer_id,completedTime:a.completedTime,updatedTime:a.updatedTime,creationTime:a.creationTime,amount:a.transaction_amount.amount,memoText:e[0],memoPhotoURLs:e[1],themeID:e[2],discountAmount:f==null?null:f.formatted,fundsAvailability:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("FundsAvailability"),a.funds_availability)),groupThreadFBID:a.group_thread_fbid,platform_item:g,statusDescription:{markup:a.status_description},bubbleView:a.bubble_view,currencyCode:a.currency_amount.currency}}function J(a){var c=a.requester,d;if(c==null)d=void 0;else{var e=c.profile_picture;d={id:c.id,name:c.short_name,full_name:c.name,picture:e==null?null:e.uri,profile_url:c.url}}e=a.requestee;if(e==null)c=void 0;else{var f=e.profile_picture;c={id:e.id,name:e.short_name,full_name:e.name,picture:f==null?null:f.uri,profile_url:e.url}}f=b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("P2PPaymentRequestStatus"),a.request_status));e=a.transfer;e=e==null?[null,""]:[I(e),e.id];var g=a.request_theme;return{amount:a.transaction_amount.amount,amountWithSymbol:a.amount.formatted,requestee:c,requester:d,currentStatus:f,currency:a.amount.currency,creationTime:a.creation_time,groupThreadFBID:a.group_thread_fbid,id:a.id,memoText:a.memo_text,themeID:g==null?null:g.id,transfer:e[0],transferID:e[1],updatedTime:a.updated_time,bubbleView:a.bubble_view,statusDescription:{markup:a.status_description}}}function K(a){var b=J({amount:a.amount,transaction_amount:a.transaction_amount,requester:a.requester,requestee:a.requestee,request_status:a.request_status,request_theme:a.request_theme,id:a.id,memo_text:a.memo_text,transfer:a.transfer,creation_time:a.creation_time,group_thread_fbid:a.group_thread_fbid,updated_time:a.updated_time,bubble_view:a.bubble_view,status_description:a.status_description});a={individualRequests:a.individual_requests.map(J)};return Object.assign(b,a)}function L(a,c,d){var e=c.media,f=e==null?null:e.animated_image,g=e==null?null:e.image,h={};c.properties.forEach(function(b){var a=b.value;h[b.key]=a==null?null:a.text;return 0});var i=c.target,z;if(i==null)z=null;else switch(i.tag|0){case 0:z=G(i[0]);break;case 1:z=H(i[0]);break;case 2:z=I(i[0]);break;case 3:z=K(i[0]);break;case 4:z=D(a,i[0]);break;case 5:z=B(i[0]);break;case 6:z=A(i[0]);break;case 8:z=E(i[0]);break;case 9:z=v(i[0]);break;case 10:z=F(a,i[0]);break;case 11:z=s(i[0]);break;case 12:z=t(i[0]);break;case 13:z=u(i[0]);break;case 14:var J=i[0],L=J.genie_sender;L=L==null?[null,null]:[L.messaging_actor.id,L.messaging_actor.name];var N=L[0],O={action_links:[],messaging_attribution:null,messenger_call_to_actions:[],xma_layout_info:null,deduplication_key:null,description:null,media:null,properties:[],source:null,style_list:[],title_with_entities:null,url:null,subattachments:[],target:null},P=c.media,Q;if(P==null)Q=null;else{P=P.pack;if(P==null){P=J.story_attachment;Q=P==null||d==null?null:M(a,{legacy_attachment_id:N,story_attachment:{action_links:d.action_links,messaging_attribution:d.messaging_attribution,messenger_call_to_actions:d.messenger_call_to_actions,xma_layout_info:d.xma_layout_info,deduplication_key:d.deduplication_key,description:d.description,media:d.media,properties:d.properties,source:d.source,style_list:d.style_list,title_with_entities:d.title_with_entities,url:d.url,subattachments:d.subattachments,target:d.target},genie_attachment:{genie_message:{story_attachment:O}}})}else Q=d==null?null:M(a,{legacy_attachment_id:N,story_attachment:O,genie_attachment:{genie_message:{story_attachment:O}}})}z={genie_id:N,genie_name:L[1],attachment:Q};break;case 16:z=m(i[0]);break;case 18:z=r(i[0]);break;case 19:z=n(i[0]);break;case 20:z=o(i[0]);break;case 21:z=C(i[0]);break;case 23:z=l(i[0]);break;case 24:z=k(a,i[0]);break;case 36:z=w(i[0]);break;case 37:z=x(i[0]);break;case 38:z=y(i[0]);break;case 39:z=p(i[0]);break;case 40:z=q(i[0]);break;default:z=i[0]}J=c.target;P=J==null||J.tag!==5?null:0;d=c.description;O=c.source;N=c.title_with_entities;return{description:d==null?null:d.text,media:{animated_image:f==null?null:f.uri,animated_image_size:f==null?{height:null,width:null}:{height:f.height,width:f.width},image:g==null?null:g.uri,image_size:g==null?{height:null,width:null}:{height:g.height,width:g.width},duration:e==null?null:e.playable_duration,playable:e==null?null:e.is_playable,source:e==null?null:e.playable_url},source:O==null?null:O.text,style_list:c.style_list,title:N==null?null:N.text,action_links:j(c.action_links),messaging_attribution:c.messaging_attribution,messenger_ctas:c.messenger_call_to_actions.map(function(a){return{id:a.id,page_id:b("bs_belt_Option").getWithDefault(b("bs_caml_option").nullable_to_opt(a.page_id),""),action_title:a.title,action_url:a.action_link,action_open_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MNCommerceCallToActionType"),a.action_open_type)),is_high_confidence:b("bs_belt_Option").getWithDefault(b("bs_caml_option").nullable_to_opt(a.is_high_confidence),!1),is_mutable_by_server:a.is_mutable_by_server,native_url:a.native_url,is_disabled:a.is_disabled,webview_metadata:{fallback_url:a.webview_metadata.fallback_url,messenger_extensions:a.webview_metadata.messenger_extensions,webview_height_ratio:a.webview_metadata.webview_height_ratio,webview_share_button:a.webview_metadata.webview_share_button}}}),xma_layout_info:c.xma_layout_info,properties:h,uri:c.url,deduplication_key:c.deduplication_key,target:z,label:P}}function M(a,c){var d=c.genie_attachment,e;if(d==null)e=null;else{d=d.genie_message;if(d==null)e=null;else{d=d.story_attachment;e=d==null?null:{description:d.description,media:d.media,source:d.source,style_list:d.style_list,title_with_entities:d.title_with_entities,properties:d.properties,url:d.url,deduplication_key:d.deduplication_key,action_links:d.action_links,messaging_attribution:d.messaging_attribution,messenger_call_to_actions:d.messenger_call_to_actions,xma_layout_info:d.xma_layout_info,target:d.target,subattachments:d.subattachments}}}d=c.story_attachment;var f;if(d==null)f=null;else{var g={description:null,media:null,source:null,style_list:[],title_with_entities:null,properties:[],url:null,deduplication_key:null,action_links:[],messaging_attribution:null,messenger_call_to_actions:[],xma_layout_info:null,target:null,subattachments:[]};c={share_id:c.legacy_attachment_id,subattachments:d.subattachments.map(function(b){return L(a,b,g)})};var h={description:d.description,media:d.media,source:d.source,style_list:d.style_list,title_with_entities:d.title_with_entities,properties:d.properties,url:d.url,deduplication_key:d.deduplication_key,action_links:d.action_links,messaging_attribution:d.messaging_attribution,messenger_call_to_actions:d.messenger_call_to_actions,xma_layout_info:d.xma_layout_info,target:d.target};d=e==null?{description:d.description,media:d.media,source:d.source,style_list:d.style_list,title_with_entities:d.title_with_entities,properties:d.properties,url:d.url,deduplication_key:d.deduplication_key,action_links:d.action_links,messaging_attribution:d.messaging_attribution,messenger_call_to_actions:d.messenger_call_to_actions,xma_layout_info:d.xma_layout_info,target:d.target,subattachments:d.subattachments}:{description:e.description,media:e.media,source:e.source,style_list:e.style_list,title_with_entities:e.title_with_entities,properties:e.properties,url:e.url,deduplication_key:e.deduplication_key,action_links:e.action_links,messaging_attribution:e.messaging_attribution,messenger_call_to_actions:e.messenger_call_to_actions,xma_layout_info:e.xma_layout_info,target:e.target,subattachments:e.subattachments};f=Object.assign(c,L(a,h,d))}return{app_attribution:null,attach_type:b("MercuryAttachmentType").SHARE,name:null,url:null,rel:null,preview_url:null,preview_width:null,preview_height:null,large_preview_url:null,large_preview_width:null,large_preview_height:null,icon_type:null,metadata:null,share:f,thumbnail_url:null}}f._getCallToActions=i;f._getActionLinks=j;f._getColor=a;f._getLogo=c;f._getPageTarget=k;f._getGroupCommerceProductItemTarget=l;f._getExternalSongTarget=m;f._getAgentSuggestionItemTarget=n;f._getFundraiserTarget=o;f._getWECFileTarget=p;f._getWECMessageVideoTarget=q;f._getRetailItemTarget=r;f._getPagesPlatformBookingMessageTarget=s;f._getServicesAppointmentAvailabilityTarget=t;f._getServicesGenericAdminTextTarget=u;f._getMessageLiveLocationTarget=v;f._getWECMessageTarget=w;f._getWECMessageImageTarget=x;f._getWECMessageAudioTarget=y;f._getBusinessRetailItem=z;f._getMessengerBusinessMessageTarget=A;f._getMessengerRetailPromotionTarget=B;f._getMessengerRetailReceiptTarget=C;f._getPagesPlatformAttachmentTarget=D;f._getPagesPlatformLeadGenInfoTarget=E;f._getQuickInviteTarget=F;f._getCrisisListingTarget=G;f._getMoneyTransferTarget=H;f._getP2PTransferTarget=I;f._getP2PTransferRequestTarget=J;f._getP2PTransferRequestWithIndividualRequests=K;f.transformStoryAttachment=L;f.getExtensibleAttachmentPayload=M}),null);
__d("MessengerMessageTransformer.bs",["bs_block","bs_js_dict","FBIDCheck","getByPath","MercuryIDs","bs_caml_format","bs_caml_option","CurrentUser","MessagingTag","bs_js_null_undefined","MercuryActionType","MessagingTagUtils","MessagingSourceEnum","StoryAttachmentStyle","MNCommerceMessageType","MercuryLogMessageType","MessageUnsendabilityStatus.bs","P2PPaymentLogMessageSubtype","MessagingGenericAdminTextType","MessengerAttachmentTransformer.bs","InstantGameUpdateXMATUpdateType"],(function(a,b,c,d,e,f){"use strict";function g(a){a=a.blob_attachments;var c=[];a==null||a.forEach(function(a){if(a.__typename==="MessageImage"){c.push(b("bs_block").__(0,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,blurred_image_uri:a.blurred_image_uri,filename:a.filename,id:a.id,preview:a.preview,large_preview:a.large_preview,thumbnail:a.thumbnail,legacy_attachment_id:a.legacy_attachment_id,original_dimensions:a.original_dimensions,original_extension:a.original_extension,render_as_sticker:a.render_as_sticker,photo_encodings:a.photo_encodings}]));return 0}else if(a.__typename==="MessageAnimatedImage"){c.push(b("bs_block").__(1,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,filename:a.filename,animated_image:a.animated_image,legacy_attachment_id:a.legacy_attachment_id,preview_image:a.preview_image,original_dimensions:a.original_dimensions}]));return 0}else if(a.__typename==="MessageAudio"){c.push(b("bs_block").__(2,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,filename:a.filename,playable_url:a.playable_url,playable_duration_in_ms:a.playable_duration_in_ms,is_voicemail:a.is_voicemail,audio_type:a.audio_type,url_shimhash:a.url_shimhash,url_skipshim:a.url_skipshim}]));return 0}else if(a.__typename==="MessageVideo"){c.push(b("bs_block").__(3,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,filename:a.filename,playable_url:a.playable_url,playable_duration_in_ms:a.playable_duration_in_ms,legacy_attachment_id:a.legacy_attachment_id,chat_image:a.chat_image,video_type:a.video_type,original_dimensions:a.original_dimensions,large_image:a.large_image,inbox_image:a.inbox_image}]));return 0}else if(a.__typename==="MessageFile"){c.push(b("bs_block").__(4,[{attribution_app:a.attribution_app,attribution_metadata:a.attribution_metadata,filename:a.filename,url:a.url,mimetype:a.mimetype,content_type:a.content_type,is_malicious:a.is_malicious,message_file_fbid:a.message_file_fbid,url_shimhash:a.url_shimhash,url_skipshim:a.url_skipshim,preview_url:a.preview_url,preview:a.preview}]));return 0}else return 0});return c}function h(a,c,d){var e=c.call_capture_attachments;if(e==null)return[];else return b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:null,blob_attachments:g({blob_attachments:e.edges.map(function(a){return a.node})}),sticker:null},c.message_id,d)}function i(a,c,d,e,f){if(c.__typename==="GroupPollExtensibleMessageAdminText"){var g=c.question,i;if(g==null)i=[{},null];else{var j=Object.assign({},g);Object.assign(j,{total_count:c.total_count,options:g.options.nodes.map(function(a){var b=Object.assign({},a);return Object.assign(b,{total_count:a.voters.nodes.length,voters:a.voters.nodes.map(function(a){return a.id})})})});i=[j,g.id]}j={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessagingGenericAdminTextType"),d)),untypedData:{event_type:c.event_type.toLowerCase(),question_id:i[1],question_json:b("bs_js_null_undefined").fromOption(b("bs_caml_option").undefined_to_opt(JSON.stringify(i[0])))}}}else if(c.__typename==="InstantGameUpdateExtensibleMessageAdminText"){j={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessagingGenericAdminTextType"),d)),untypedData:{game_id:(g=b("getByPath"))(c,["game","id"]),update_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("InstantGameUpdateXMATUpdateType"),c.update_type)),collapsed_text:c.collapsed_text,expanded_text:c.expanded_text,leaderboard_json:c.leaderboard_json,cta_url:g(c,["instant_game_update_data","cta_url"]),cta_title:g(c,["instant_game_update_data","cta_title"]),custom_image_url:g(c,["instant_game_update_data","photo","image","uri"]),template:g(c,["instant_game_update_data","template"])}}}else if(c.__typename==="MessengerAdContextAdminText")j={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessagingGenericAdminTextType"),d)),untypedData:{ad_url:c.ad_url}};else if(c.__typename==="AdExtensibleMessageAdminText")j={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessagingGenericAdminTextType"),d)),untypedData:{ad_client_token:c.ad_client_token,ad_id:c.ad_id,ad_preferences_link:c.ad_preferences_link,ad_properties:c.ad_properties}};else if(c.__typename==="MessengerCallLogExtensibleMessageAdminText")j={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessagingGenericAdminTextType"),d)),untypedData:Object.assign(Object.assign({},c),{call_capture_attachments:h(a,c,f)})};else if(c.__typename==="ThemeColorExtensibleMessageAdminText"||c.__typename==="ThreadIconExtensibleMessageAdminText"||c.__typename==="ThreadNicknameExtensibleMessageAdminText"||c.__typename==="AcceptPendingThreadExtensibleMessageAdminText"||c.__typename==="AddContactExtensibleMessageAdminText"||c.__typename==="RtcCallLogExtensibleMessageAdminText"||c.__typename==="GameScoreExtensibleMessageAdminText"||c.__typename==="ConfirmFriendRequestExtensibleMessageAdminText"||c.__typename==="MessengerGrowthGenericExtensibleMessageAdminText"||c.__typename==="PartiesInviteExtensibleMessageAdminText"||c.__typename==="AppointmentReminderExtensibleMessageAdminText"||c.__typename==="LinkCTAExtensibleMessageAdminText"||c.__typename==="GraphQLServicesAppointmentsOptOutExtensibleMessageAdminText"||c.__typename==="ServicesLeadGenSurveyExtensibleMessageAdminText"||c.__typename==="ServicesLeadGenSurveyEditExtensibleMessageAdminText"||c.__typename==="MessengerIcebreakerVoteCastExtensibleMessageAdminText"||c.__typename==="PagesMarkAsPaidExtensibleMessageAdminText"||c.__typename==="PagesMarkAsPaidNewExtensibleMessageAdminText"||c.__typename==="WorkBotInstalledExtensibleMessageAdminText"||c.__typename==="WorkChatReminderLinkCTAExtensibleMessageAdminText"||c.__typename==="PageThreadActionSystemAddDetailsXMAT"||c.__typename==="PostSharedFromGroupExtensibleMessageAdminText")j={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessagingGenericAdminTextType"),d)),untypedData:Object.assign({},c)};else if(c.__typename==="LightweightEventCreateExtensibleMessageAdminText"||c.__typename==="LightweightEventDeleteExtensibleMessageAdminText"||c.__typename==="LightweightEventNotifyBeforeEventExtensibleMessageAdminText"||c.__typename==="LightweightEventNotifyExtensibleMessageAdminText"||c.__typename==="LightweightEventUpdateExtensibleMessageAdminText"||c.__typename==="LightweightEventUpdateLocationExtensibleMessageAdminText"||c.__typename==="LightweightEventUpdateTimeExtensibleMessageAdminText"||c.__typename==="LightweightEventUpdateTitleExtensibleMessageAdminText"||c.__typename==="LightweightEventRSVPExtensibleMessageAdminText"){i=c.event_reminder;if(i==null)g=void 0;else{a=i.lightweight_event_creator;f=a==null?void 0:a.id;a=i.location_page;a=a==null?void 0:a.id;var k=i.timezone_id;k=k==null?void 0:k.timezone;var l=i.location_coordinates;l=l==null?{latitude:void 0,longitude:void 0}:l;var m=i.event_reminder_members;m=m==null?void 0:m.edges;g={event_creator_id:f,event_id:i.id,event_location_id:a,event_location_name:i.location_name,event_seconds_to_notify_before:i.seconds_to_notify_before,event_time:i.time,event_end_time:i.end_time,event_timezone:k,event_title:i.event_title,event_type:i.lightweight_event_type,event_track_rsvp:i.allows_rsvp,latitude:l.latitude,longitude:l.longitude,guest_state_list:m,guest_id:c.guest_id,guest_status:c.guest_status}}j={message_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessagingGenericAdminTextType"),d)),untypedData:g}}else j=c.__typename==="AdReplyMessageAdminText"?{message_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessagingGenericAdminTextType"),d)),untypedData:{ad_url:c.ad_url,should_show_url:c.should_show_url}}:{message_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessagingGenericAdminTextType"),d)),untypedData:void 0};return{log_message_body:e,log_message_data:j,log_message_type:b("MercuryLogMessageType").GENERIC_ADMIN_TEXT}}function j(a){return a.map(function(a){if(a==="p2p_transfer")return b("StoryAttachmentStyle").ORION;else if(a==="p2p_payment_request")return b("StoryAttachmentStyle").ORION_REQUEST;else return a})}function k(a){var c=a.target,d;if(c==null)d=null;else if(c.__typename==="CrisisListing")d=b("bs_block").__(0,[{listing_type:c.listing_type,listing_category:c.listing_category,map_image:c.map_image}]);else if(c.__typename==="MoneyTransfer")d=b("bs_block").__(1,[{sender:c.sender,receiver:c.receiver,transfer_id:c.transfer_id,bubble_view:c.bubble_view}]);else if(c.__typename==="PeerToPeerTransfer")d=b("bs_block").__(2,[{sender:c.sender,receiver_profile:c.receiver_profile,transaction_amount:c.transaction_amount,transfer_status:c.transfer_status,transfer_id:c.transfer_id,completedTime:c.completedTime,updatedTime:c.updatedTime,creationTime:c.creationTime,transfer_context:c.transfer_context,amount_fb_discount:c.amount_fb_discount,funds_availability:c.funds_availability,group_thread_fbid:c.group_thread_fbid,platform_item:c.platform_item,id:c.id,status_description:c.status_description,bubble_view:c.bubble_view,currency_amount:c.currency_amount}]);else if(c.__typename==="PeerToPeerPaymentRequest")d=b("bs_block").__(3,[{amount:c.amount,transaction_amount:c.transaction_amount,requester:c.requester,requestee:c.requestee,request_status:c.request_status,request_theme:c.request_theme,id:c.id,memo_text:c.memo_text,transfer:c.transfer,creation_time:c.creation_time,group_thread_fbid:c.group_thread_fbid,updated_time:c.updated_time,status_description:c.status_description,bubble_view:c.bubble_view,individual_requests:c.individual_requests}]);else if(c.__typename==="PaymentPlatformAttachment")d=b("bs_block").__(4,[{payment_modules_client:c.payment_modules_client,is_viewer_seller:c.is_viewer_seller,payment_snippet:c.payment_snippet,item_list:c.item_list,components:c.components,payment_call_to_actions:c.payment_call_to_actions,click_action:c.click_action,summary_action:c.summary_action,invoicer_id:c.invoicer_id,is_last_attachment:c.is_last_attachment}]);else if(c.__typename==="MessengerRetailPromotion")d=b("bs_block").__(5,[{message:c.message,call_to_actions:c.call_to_actions,promotion_items:c.promotion_items}]);else if(c.__typename==="MessengerBusinessMessage")d=b("bs_block").__(6,[{message:c.message,call_to_actions:c.call_to_actions,business_items:c.business_items}]);else if(c.__typename==="Video")d=b("bs_block").__(7,[{video_id:c.video_id}]);else if(c.__typename==="PagesPlatformLeadGenInfo")d=b("bs_block").__(8,[{field_data_list:c.field_data_list}]);else if(c.__typename==="MessageLiveLocation")d=b("bs_block").__(9,[{live_location_id:c.live_location_id,is_expired:c.is_expired,expiration_time:c.expiration_time,sender:c.sender,coordinate:c.coordinate,location_title:c.location_title,sender_destination:c.sender_destination,stop_reason:c.stop_reason}]);else if(c.__typename==="QuickInvite")d=b("bs_block").__(10,[{id:c.id,invite_sender:c.invite_sender,invite_recipient:c.invite_recipient}]);else if(c.__typename==="PagesPlatformBookingMessage")d=b("bs_block").__(11,[{id:c.id,page:c.page,message_bubble_type:c.message_bubble_type,user:c.user,native_component_flow_request:c.native_component_flow_request}]);else if(c.__typename==="ServicesAppointmentAvailability")d=b("bs_block").__(12,[{id:c.id,page:c.page,consumer:c.consumer,formatted_available_time_ranges:c.formatted_available_time_ranges,has_booking_request_created:c.has_booking_request_created}]);else if(c.__typename==="ServicesGenericAdminText")d=b("bs_block").__(13,[{id:c.id}]);else if(c.__typename==="GenieMessage")d=b("bs_block").__(14,[{genie_sender:c.genie_sender,story_attachment:c.story_attachment}]);else if(c.__typename==="Event")d=b("bs_block").__(15,[{eventID:c.eventID,guestStatus:c.guestStatus,canViewerJoin:c.canViewerJoin,timeString:c.timeString,event_place:c.event_place,social_context:c.social_context,watchStatus:c.watchStatus,connection_style:c.connection_style,canViewerWatch:c.canViewerWatch,profile_picture:c.profile_picture,name:c.name,start_timestamp:c.start_timestamp}]);else if(c.__typename==="ExternalSong")d=b("bs_block").__(16,[{application_name:c.application_name,artist_names:c.artist_names,audio_url:c.audio_url,duration_ms:c.duration_ms,music_title:c.music_title}]);else if(c.__typename==="LightweightAction")d=b("bs_block").__(17,[{lwa_state:c.lwa_state,lwa_type:c.lwa_type}]);else if(c.__typename==="MessengerRetailItem")d=b("bs_block").__(18,[{id:c.id,name:c.name,desc:c.desc,thumb_url:c.thumb_url,item_url:c.item_url,source:c.source,image_aspect_ratio:c.image_aspect_ratio,first_metaline:c.first_metaline,second_metaline:c.second_metaline,third_metaline:c.third_metaline,default_action:c.default_action,call_to_actions:c.call_to_actions}]);else if(c.__typename==="AgentItemSuggestion")d=b("bs_block").__(19,[{id:c.id,desc:c.desc,total_cost:c.total_cost,merchant_name:c.merchant_name,target_url:c.target_url,thumb_url:c.thumb_url,raw_amount:c.raw_amount,payment:c.payment,price_amount:c.price_amount,price_currency:c.price_currency,name:c.name}]);else if(c.__typename==="FundraiserPersonToCharity"||c.__typename==="FundraiserPersonForPerson"){var e=c.fundraiser_detailed_progress_text,f=c.fundraiser_subtitle_text,g=c.focused_cover_photo;d=b("bs_block").__(20,[{fundraiserID:c.id,canDonate:c.can_donate,hasViewerDonated:c.has_viewer_donated,fundraiserDetailedProgressText:e==null?null:e.text,fundraiserSubtitleText:f==null?null:f.text,focusedCoverPhoto:g==null?null:{src:g.photo.image.uri,data:{height:g.photo.image.height,width:g.photo.image.width}}}])}else d=c.__typename==="MessengerRetailReceipt"?b("bs_block").__(21,[{account_holder_name:c.account_holder_name,adjustments:c.retail_adjustments,cancellation_url:c.cancellation_url,items:c.retail_items,merchant_name:c.merchant_name,messenger_commerce_bubble_type:c.bubble_type,order_id:c.receipt_id,order_time:c.order_time_for_display,order_url:c.receipt_url,payment_method:c.order_payment_method,receipt_id:c.id,recipient_name:c.recipient_name,shipping_cost:c.shipping_cost,shipping_method:c.shipping_method,status:c.status,structured_address:c.structured_address,subtotal:c.subtotal,total_cost:c.total,total_tax:c.tax,partner_logo:c.partner_log}]):c.__typename==="JobApplication"?b("bs_block").__(22,[{id:c.id}]):c.__typename==="GroupCommerceProductItem"?b("bs_block").__(23,[{group_commerce_item_description:c.group_commerce_item_description,group_commerce_item_seller:c.group_commerce_item_seller,formatted_price:c.formatted_price,group_commerce_item_title:c.group_commerce_item_title,primary_photo:c.primary_photo,url:c.url}]):c.__typename==="Page"?b("bs_block").__(24,[{address:c.address,top_category_name:c.top_category_name,cover_photo:c.cover_photo,location:c.location,name:c.name,overall_star_rating:c.overall_star_rating,id:c.id,price_range_description:c.price_range_description}]):c.__typename==="MessengerEventReminder"?b("bs_block").__(25,[{is_active:c.is_active,event_title:c.event_title,time:c.time}]):c.__typename==="FormProgressStoryAttachment"?b("bs_block").__(50,[{progress:c.progress,url:c.url}]):c.__typename==="AirlineBoardingPassCollectionMessageAttachment"?b("bs_block").__(26,[{tint_color:c.tint_color,logo:c.logo,flight_label:c.flight_label,boarding_time_label:c.boarding_time_label,departure_label:c.departure_label,passenger_names_label:c.passenger_names_label,passenger_seat_label:c.passenger_seat_label,flight_terminal_label:c.flight_terminal_label,flight_gate_label:c.flight_gate_label,view_boarding_pass_cta_label:c.view_boarding_pass_cta_label,boarding_passes:c.boarding_passes,share_cta_label:c.share_cta_label,message_cta_label:c.message_cta_label,boarding_pass_title_label:c.boarding_pass_title_label,boarding_pass_error_title_label:c.boarding_pass_error_title_label}]):c.__typename==="AirlineCheckInReminderMessageAttachment"?b("bs_block").__(27,[{pnr_number:c.pnr_number,tint_color:c.tint_color,checkin_url:c.checkin_url,booking_number_label:c.booking_number_label,flight_label:c.flight_label,arrival_time_label:c.arrival_time_label,departure_time_label:c.departure_time_label,checkin_cta_label:c.checkin_cta_label,logo:c.logo,flight_infos:c.flight_infos}]):c.__typename==="AirlineUpdateMessageAttachment"?b("bs_block").__(28,[{pnr_number:c.pnr_number,tint_color:c.tint_color,update_type:c.update_type,departure_time_label:c.departure_time_label,arrival_time_label:c.arrival_time_label,booking_number_label:c.booking_number_label,flight_gate_label:c.flight_gate_label,flight_label:c.flight_label,flight_status_label:c.flight_status_label,passenger_names_label:c.passenger_names_label,passenger_seat_label:c.passenger_seat_label,logo:c.logo,flight_info:c.flight_info,hightlighted_labels:c.hightlighted_labels}]):c.__typename==="AirlineItineraryMessageAttachment"?b("bs_block").__(29,[{confirmation_number:c.confirmation_number,pnr_number:c.pnr_number,tint_color:c.tint_color,formatted_total:c.formatted_total,itemized_price_infos:c.itemized_price_infos,formatted_tax:c.formatted_tax,formatted_base_price:c.formatted_base_price,passenger_infos:c.passenger_infos,logo:c.logo,aircraft_type_label:c.aircraft_type_label,arrival_time_label:c.arrival_time_label,base_price_label:c.base_price_label,booking_number_label:c.booking_number_label,cabin_type_label:c.cabin_type_label,departure_time_label:c.departure_time_label,flight_confirmation_label:c.flight_confirmation_label,flight_date_label:c.flight_date_label,flight_label:c.flight_label,flight_terminal_label:c.flight_terminal_label,itinerary_error_title_label:c.itinerary_error_title_label,itinerary_title_label:c.itinerary_title_label,passenger_name_label:c.passenger_name_label,passenger_names_label:c.passenger_names_label,passenger_seat_label:c.passenger_seat_label,purchase_summary_label:c.purchase_summary_label,taxes_label:c.taxes_label,total_label:c.total_label,view_details_cta_label:c.view_details_cta_label,itinerary_legs:c.itinerary_legs}]):c.__typename==="MessengerRetailShipmentTrackingEvent"?b("bs_block").__(30,[{id:c.id,shipment:c.shipment,tracking_event_time_for_display:c.tracking_event_time_for_display,shipment_tracking_event_type:c.shipment_tracking_event_type,messenger_commerce_location:c.messenger_commerce_location,tracking_event_description:c.tracking_event_description,bubble_type:c.bubble_type}]):c.__typename==="MessengerRetailShipment"?b("bs_block").__(31,[{id:c.id,tracking_number:c.tracking_number,shipdate_for_display:c.shipdate_for_display,estimated_delivery_time_for_display:c.estimated_delivery_time_for_display,commerce_origin:c.commerce_origin,commerce_destination:c.commerce_destination,retail_carrier:c.retail_carrier,shipment_tracking_events:c.shipment_tracking_events,receipt:c.receipt,recipient:c.recipient,retail_shipment_items:c.retail_shipment_items,bubble_type:c.bubble_type}]):c.__typename==="EventAttendanceConfirmation"?b("bs_block").__(33,[{id:c.id,num_guests:c.num_guests,attendee_answers:c.attendee_answers,event:c.event}]):c.__typename==="LeadGenDeepLinkData"?b("bs_block").__(32,[{id:c.id,cover_image:c.cover_image,headline:c.headline,name:c.name,page:c.page}]):c.__typename==="UserLeadGenInfo"?b("bs_block").__(34,[{id:c.id,field_data:c.field_data}]):c.__typename==="WECMessageAudio"?b("bs_block").__(38,[{id:c.id,filename:c.filename,playable_url:c.playable_url,url_shimhash:c.url_shimhash,filesize:c.filesize,extension:c.extension,duration:c.duration}]):c.__typename==="IceBreakerMessageAttachment"?b("bs_block").__(35,[{ice_breaker_title:c.ice_breaker_title,ice_breaker_messages:c.ice_breaker_messages,ad_id:c.ad_id}]):c.__typename==="WECMessage"?b("bs_block").__(36,[{sender_wec_number:c.sender_wec_number,sender_wec_number_formated:c.sender_wec_number_formated,sender_wec_number_fbid:c.sender_wec_number_fbid,sender_wec_name:c.sender_wec_name}]):c.__typename==="WECMessageImage"?b("bs_block").__(37,[{id:c.id,extension:c.extension,preview:c.preview,large_preview:c.large_preview}]):c.__typename==="WECMessageFile"?b("bs_block").__(39,[{id:c.id,name:c.name,is_malicious:c.is_malicious,uri:c.uri,extension:c.extension,filesize:c.filesize}]):c.__typename==="WECMessageVideo"?b("bs_block").__(40,[{id:c.id,playable_url:c.playable_url,url_shimhash:c.url_shimhash,filesize:c.filesize,extension:c.extension,filename:c.filename,height:c.height,width:c.width}]):c.__typename==="MontageDirect"?b("bs_block").__(41,[{message_state:c.message_state,is_keep_disabled:c.is_keep_disabled,blob_media_type:c.blob_media_type,blob_media:c.blob_media,image:c.image}]):c.__typename==="MBirthdayReminderAttachment"?b("bs_block").__(42,[{friend_id:c.friend_id,confidence:c.confidence,birthday_date:c.birthday_date}]):c.__typename==="MPersonalRemindersList"?b("bs_block").__(43,[{has_more_upcoming_reminders:c.has_more_upcoming_reminders,personal_reminders:c.personal_reminders}]):c.__typename==="MentorshipMessengerCurriculumStep"?b("bs_block").__(44,[{id:c.id,module_name:c.module_name,mentorship_program:c.mentorship_program,program_name:c.program_name,curriculum_message:c.curriculum_message,prompt:c.prompt,step_count:c.step_count,total_steps:c.total_steps}]):c.__typename==="MentorshipMessengerDiscussionTopicSet"?b("bs_block").__(45,[{id:c.id,topics:c.topics}]):c.__typename==="MentorshipMessengerLeavePrompt"?b("bs_block").__(46,[{mentorship_program:c.mentorship_program,id:c.id,xma_type:c.xma_type}]):c.__typename==="MentorshipMessengerReminder"?b("bs_block").__(47,[{id:c.id,xma_type:c.xma_type}]):c.__typename==="MentorshipMessengerSurvey"?b("bs_block").__(48,[{id:c.id,xma_type:c.xma_type,xma_title:c.xma_title,xma_disclaimer:c.xma_disclaimer,mentorship_program:c.mentorship_program}]):c.__typename==="MentorshipMessengerProgressTracker"?b("bs_block").__(49,[{id:c.id,xma_type:c.xma_type,xma_title:c.xma_title,xma_body:c.xma_body}]):c.__typename==="Story"?b("bs_block").__(51,[{title:c.title,message_richtext:c.message_richtext,feedback:c.feedback,reaction_count_reduced:c.reaction_count_reduced,top_reactions:c.top_reactions,post_id:c.post_id,creation_time:c.creation_time,description:c.description,actors:c.actors,to:c.to,attachments:c.attachments,attached_story:c.attached_story}]):c.__typename==="User"?b("bs_block").__(52,[{type:c.__typename,id:c.id,name:c.name,profile_picture:c.profile_picture,cover_photo:c.cover_photo,work_info:c.work_info,subscribe_status:c.subscribe_status}]):c.__typename==="Group"?b("bs_block").__(53,[{type:c.__typename,id:c.id,name:c.name,cover_photo:c.cover_photo,visibility:c.visibility,visibility_sentence:c.visibility_sentence,viewer_join_state:c.viewer_join_state,group_general_chat:c.group_general_chat,work_groups_sync_metadata:c.work_groups_sync_metadata}]):c.__typename==="AppContent"?b("bs_block").__(54,[{type:c.__typename,id:c.id,attachment_type_name:c.attachment_type_name,privacy_status:c.privacy_status,file_type_category:c.file_type_category,app_integration:c.app_integration,attachment_icon:c.app_integration,content_uri:c.content_uri,link_preview_additional_data:c.link_preview_additional_data}]):c.__typename==="OneVCMeetingPublic"?b("bs_block").__(55,[{type:c.__typename,subject:c.subject,joinable_link:c.joinable_link}]):null;return{description:a.description,media:a.media,source:a.source,style_list:j(a.style_list),title_with_entities:a.title_with_entities,properties:a.properties,url:a.url,deduplication_key:a.deduplication_key,action_links:a.action_links,messaging_attribution:a.messaging_attribution,messenger_call_to_actions:a.messenger_call_to_actions,xma_layout_info:a.xma_layout_info,target:d}}function l(a){var b=k({description:a.description,media:a.media,source:a.source,style_list:a.style_list,title_with_entities:a.title_with_entities,properties:a.properties,url:a.url,deduplication_key:a.deduplication_key,action_links:a.action_links,messaging_attribution:a.messaging_attribution,messenger_call_to_actions:a.messenger_call_to_actions,xma_layout_info:a.xma_layout_info,target:a.target});if(b==null)return null;else{a=a.subattachments.map(k);return Object.assign({subattachments:a},b)}}function m(a){a=a.message;if(a==null)return[];else{var b=[];a.ranges.forEach(function(a){var c=a.entity;if(c==null)return 0;else{var d=c.id;c=c.thread_key;if(d==null)if(c==null)return 0;else{c=c.thread_fbid;if(c==null)return 0;else{b.push({id:c,offset:a.offset,length:a.length,type:a.__typename});return 0}}else{b.push({id:d,offset:a.offset,length:a.length,type:a.__typename});return 0}}});return b}}function n(a,c,d,e){var f={};c.message_reactions.forEach(function(a){f[a.user.id]=a.reaction;return 0});var j=b("FBIDCheck").isUser_deprecated(c.message_sender.id),k=j?b("MessagingTagUtils").getSourceFromTags(c.tags_list):b("MessagingSourceEnum").UNKNOWN;j=j?b("MessagingTagUtils").getSourceTags(c.tags_list,k):[];var o=c.message_id,p=d.thread_id,q=d.thread_fbid,r=d.other_user_fbid;r=p==null?q==null?r==null?null:b("MercuryIDs").getThreadIDFromUserID(r):b("MercuryIDs").getThreadIDFromThreadFBID(q):p;q=c.tags_list.some(function(a){if(a===b("MessagingTag").ACTION_COPIED_MESSAGE||a===b("MessagingTag").ACTION_COPIED_SELF_MESSAGE||a===b("MessagingTag").ACTION_COPIED_ATTACHMENT)return!0;else return a===b("MessagingTag").ACTION_COPIED_SELF_ATTACHMENT});p=c.commerce_message_type;var s=c.customizations,t=c.replied_to_message,u;if(t==null)u=null;else{var v=t.message;u=v==null?{status:t.status,message:null}:{status:t.status,message:b("bs_js_null_undefined").fromOption(b("bs_caml_option").some(n(a,v,d,e)))}}t=c.error_data;v=c.unsent_timestamp_precise;v=v==null||v==="0"?null:b("bs_js_null_undefined").fromOption(b("bs_caml_format").caml_float_of_string(v));var w=c.unsender;r={thread_id:r,thread_fbid:d.thread_fbid,other_user_fbid:d.other_user_fbid,action_type:c.__typename==="UserMessage"?b("MercuryActionType").USER_GENERATED_MESSAGE:b("MercuryActionType").LOG_MESSAGE,message_id:o,threading_id:null,offline_threading_id:c.offline_threading_id,author:b("MercuryIDs").getParticipantIDFromUserID(c.message_sender.id),author_email:c.message_sender.email,ephemeral_ttl_mode:c.ttl,timestamp:b("bs_caml_format").caml_float_of_string(c.timestamp_precise),is_unread:c.unread,is_filtered_content:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT)!==-1,is_filtered_content_bh:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT_BH)!==-1,is_filtered_content_account:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT_ACCOUNT)!==-1,is_filtered_content_quasar:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT_QUASAR)!==-1,is_filtered_content_invalid_app:c.tags_list.indexOf(b("MessagingTag").FILTERED_CONTENT_INVALID_APP)!==-1,is_sponsored:c.is_sponsored,is_one_way_sent:c.tags_list.some(function(a){return a===b("MessagingTag").ONE_WAY_MESSAGE}),ad_id:c.ad_id,ad_client_token:c.ad_client_token,commerce_message_type:p==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MNCommerceMessageType"),p)),customizations:s==null?[]:s,source:k,source_tags:j,tags:c.tags_list,is_spoof_warning:c.tags_list.indexOf(b("MessagingTag").DOMAIN_AUTH_FAIL)!==-1||c.tags_list.indexOf(b("MessagingTag").SPAM_SPOOFING)!==-1||c.tags_list.indexOf(b("MessagingTag").SPOOF_WARNING)!==-1,folder:d.folder,platform_xmd:c.platform_xmd_encoded,m_suggestions:c.m_suggestions,message_source:c.message_source_data,montage_reply_data:c.montage_reply_data,replied_to_message:u,skip_bump_thread:!1,profile_ranges:m(c),reactions:f,error_data:t==null?null:{description:t.description},removed_timestamp:v,unsender:w==null?null:{id:b("MercuryIDs").getParticipantIDFromUserID(w.messaging_actor.id),name:w.messaging_actor.name,short_name:w.messaging_actor.short_name},verse_group_role_xmd:c.verse_group_role_xmd,mib_direct_message_data:c.mib_direct_message_data,message_unsendability_status:b("MessageUnsendabilityStatus.bs").fromNullableString(c.message_unsendability_status),has_attachment:null,attachments:null,raw_attachments:null,ranges:null,meta_ranges:null,status:null,log_message_type:null,log_message_data:null,log_message_body:null,body:null,subject:null,creator_info:null,is_forwarded:q,preview_attachments:null,sticker_id:null};if(c.__typename==="UserMessage"){p=g(c);s=c.extensible_attachment;if(s==null)k=null;else{j=s.story_attachment;u=s.genie_attachment;if(u==null)t=null;else{v=u.genie_message;if(v==null)w=null;else{q=v.story_attachment;w={story_attachment:q==null?null:l(q)}}t={genie_message:w}}k={legacy_attachment_id:s.legacy_attachment_id,story_attachment:j==null?null:l(j),genie_attachment:t}}u=b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:k,blob_attachments:p,sticker:c.sticker},o,e);v=c.message;q=c.page_admin_sender;Object.assign(r,{body:v==null?null:v.text,creator_info:q==null?null:{creatorID:q.admin_id,creatorName:q.name,creatorType:q.sender_type,labelType:q.label_type,pageID:q.page_id,profileURI:q.profile_uri},subject:null,has_attachment:u.length>0,attachments:u,raw_attachments:null,ranges:void 0,meta_ranges:c.meta_ranges.map(function(a){return babelHelpers["extends"]({},a,{data:JSON.parse(a.data)})})})}else if(c.__typename==="VoiceCallMessage"||c.__typename==="VideoCallMessage"){w=c.__typename;s=w==="VoiceCallMessage"?b("MercuryLogMessageType").PHONE_CALL:b("MercuryLogMessageType").VIDEO_CALL;j=c.message_sender.id;t=d.other_user_fbid;k=t==null?null:b("MercuryIDs").getParticipantIDFromUserID(j===t?b("CurrentUser").getID():t);p=c.answered;Object.assign(r,{log_message_type:s,log_message_data:{answered:p==null?!1:p,call_capture_attachments:h(a,c,e),caller:b("MercuryIDs").getParticipantIDFromUserID(j),callee:k},log_message_body:c.snippet})}else if(c.__typename==="ThreadNameMessage")Object.assign(r,{log_message_type:b("MercuryLogMessageType").THREAD_NAME,log_message_data:{name:c.thread_name},log_message_body:c.snippet});else if(c.__typename==="ThreadImageMessage"){o=c.image_with_metadata;if(o==null)v=null;else{q=o.preview;v={preview_url:q==null?null:q.uri,metadata:{fbid:o.legacy_attachment_id,dimensions:String(o.original_dimensions.x)+(","+String(o.original_dimensions.y))}}}Object.assign(r,{log_message_type:b("MercuryLogMessageType").THREAD_IMAGE,log_message_data:{image:v},log_message_body:c.snippet})}else if(c.__typename==="ParticipantsAddedMessage"){u=c.participants_added;Object.assign(r,{log_message_type:b("MercuryLogMessageType").SUBSCRIBE,log_message_data:{added_participants:u==null?[]:u.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.id)})},log_message_body:c.snippet})}else if(c.__typename==="ParticipantLeftMessage"){w=c.participants_removed;Object.assign(r,{log_message_type:b("MercuryLogMessageType").UNSUBSCRIBE,log_message_data:{removed_participants:w==null?[]:w.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.id)})},log_message_body:c.snippet})}else if(c.__typename==="GenericAdminTextMessage"){d=c.extensible_message_admin_text;t=c.extensible_message_admin_text_type;d==null?t==null||Object.assign(r,{log_message_body:c.snippet,log_message_data:{message_type:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessagingGenericAdminTextType"),t)),untypedData:void 0},log_message_type:b("MercuryLogMessageType").GENERIC_ADMIN_TEXT}):t==null||Object.assign(r,i(a,d,t,c.snippet,e))}else if(c.__typename==="P2PPaymentRequestMessage"||c.__typename==="P2PPaymentMessage"){s=c.p2p_sender;p=c.p2p_receiver;j=c.amount;k=c.message_type;Object.assign(r,{log_message_body:c.snippet,log_message_data:{transfer_id:c.transfer_id,senderId:s==null?null:b("MercuryIDs").getParticipantIDFromUserID(s.id),receiverId:p==null?null:b("MercuryIDs").getParticipantIDFromUserID(p.id),formattedAmount:j==null?null:j.formatted,subtype:k==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("P2PPaymentLogMessageSubtype"),k))},log_message_type:b("MercuryLogMessageType").ORION})}return r}f.unsafeCastBlobAttachments=g;f._getCallCaptureAttachments=h;f._getGenericAdminTextMessage=i;f._getStyleList=j;f.unsafeCastExtensibleAttachmentWithoutSubattachments=k;f.unsafeCastExtensibleAttachment=l;f._getProfileRanges=m;f.transformMessage=n}),null);
__d("MessengerPaperclipIconSVGM4React.bs",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){return h.jsx("svg",{children:h.jsxs("g",{children:[h.jsx("polygon",{points:"0 36 36 36 36 0 0 0"}),h.jsx("path",{d:"M18,31 C13.5815,31 10,27.4185 10,23 L10,11 C10,7.6865 12.6865,5 16,5 C19.3135,5 22,7.6865 22,11 L22,21 C22,23.209 20.209,25 18,25 C15.791,25 14,23.209 14,21 L14,14.5 C14,13.6715 14.6715,13 15.5,13 C16.3285,13 17,13.6715 17,14.5 L17,21 C17,21.552 17.448,22 18,22 C18.552,22 19,21.552 19,21 L19,11 C19,9.3435 17.6565,8 16,8 C14.3435,8 13,9.3435 13,11 L13,23 C13,25.761 15.239,28 18,28 C20.761,28 23,25.761 23,23 L23,14.5 C23,13.6715 23.6715,13 24.5,13 C25.3285,13 26,13.6715 26,14.5 L26,23 C26,27.4185 22.4185,31 18,31",fill:a})],fill:"none",fillRule:"evenodd"}),className:"_7oal",height:"36px",width:"36px",viewBox:"0 0 36 36"})}f.make=a}),null);
__d("MessengerPaperclipIconSVGM4React.re",["MessengerPaperclipIconSVGM4React.bs"],(function(a,b,c,d,e,f){a=function(a){a=b("MessengerPaperclipIconSVGM4React.bs").make(a.fill);return a};f.make=a}),null);
__d("MessengerParticipantUtils.bs",["bs_belt_Set","bs_caml_obj","MercuryIDs"],(function(a,b,c,d,e,f){"use strict";function g(a,c,d){var e=b("MercuryIDs").getParticipantIDFromUserID(a);a=d.participants.filter(function(a){return b("bs_caml_obj").caml_notequal(a,e)});return a.filter(function(a){return b("bs_belt_Set").has(c,a)})}d=b("bs_belt_Set").has;function h(a,b,c){if(c.is_canonical)return[];else return g(a,b,c)}function a(a,b,c){return h(a,b,c).length>0}function c(a,b,c){return g(a,b,c).length>0}f.findIntersection=g;f.has=d;f.participantsInGroupThread=h;f.areParticipantsInGroupThread=a;f.areParticipantsInThread=c}),null);
__d("MessengerThreadCannotReplyReason.bs",["bs_js_dict","MessengerThreadCannotReplyReason"],(function(a,b,c,d,e,f){"use strict";function a(a){if(a==null)return;else return b("bs_js_dict").get(b("MessengerThreadCannotReplyReason"),a)}function c(a){if(a==null)return null;else if(a!==0)switch(a-1|0){case 0:return b("MessengerThreadCannotReplyReason").RECIPIENTS_NOT_LOADABLE;case 1:return b("MessengerThreadCannotReplyReason").BLOCKED;case 2:return b("MessengerThreadCannotReplyReason").MESSENGER_BLOCKEE}else return b("MessengerThreadCannotReplyReason").BLOCKED}f.fromName=a;f.fromMessageThreadCannotReplyReason=c}),null);
__d("MessengerServerPayloadTransformer.bs",["fbt","URI","FBID.bs","bs_array","bs_string","bs_js_dict","bs_js_json","getByPath","bs_caml_array","ChatConfig","MercuryIDs","bs_belt_Option","bs_caml_format","bs_caml_option","CurrentUser","GenderConst","bs_js_null_undefined","DisplayGenderConst","MessagingThreadType","isMessengerDotComURI","WorkForeignEntityType","MercuryParticipantTypes","MessengerGroupAdminType","MessengerGroupsSyncStatus.bs","MessengerGroupThreadSubType","MessengerMessageTransformer.bs","MessengerAttachmentTransformer.bs","MessengerGroupAdminModelStatus.bs","MessengerObjectAssociationType","MessageThreadUnsendabilityStatus.bs","MessengerThreadCannotReplyReason","MessengerThreadCannotReplyReason.bs"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){var c=a.location_coordinates;c=c==null?[null,null]:[c.latitude,c.longitude];var d=a.location_page,e;if(d==null)e=null;else{d=d.address;e=d==null?null:d.full_address}d=a.allows_rsvp;d=d?1:0;var f=b("bs_array").fold_left(function(a,b){a[b.node.id]=b.guest_list_state;return a},{},a.event_reminder_members.edges),g=a.lightweight_event_creator;return{creator_id:g==null?null:g.id,event_members:f,event_time:a.time,event_type:a.lightweight_event_type,latitude:c[0],longitude:c[1],location_address:e,location_name:a.location_name,note:a.note,oid:a.id,related_event:a.related_event,repeat_mode:a.repeat_mode,seconds_to_notify_before:a.seconds_to_notify_before,status:a.lightweight_event_status,title:a.event_title,track_rsvp:d}}function j(a){a=a.associated_object;if(a==null)return null;else{var c=a.action_link,d;if(c==null)d=null;else{var e=b("CurrentUser").isWorkUser();d=e?c:new(h||(h=b("URI")))(c).setDomain("www.facebook.com")}e=a.profile_picture;c=a.group_general_chat;var f=a.group_events,g=a.group_saves,i=a.verse_group_link;return{id:a.id,name:a.name,action_link:d,profile_picture:e==null?null:{uri:e.uri},group_general_chat:c==null?null:{id:c.id},room_type:a.room_type,privacy_mode:a.privacy_mode,approval_mode_toggleable:a.approval_mode_toggleable,start_timestamp:a.start_timestamp,event_place:a.event_place,mentorship_program:a.mentorship_program,group_events:f==null?{count:0}:{count:f.count},group_saves:g==null?{count:0}:{count:g.count},verse_group_link:i==null?null:new(h||(h=b("URI")))(i).setDomain("www.facebook.com")}}}function k(a){a=a.related_page_thread;if(a==null)return null;else{var b=a.custom_thread_tags.nodes.map(function(a){return{id:a.id,name:a.name,color:a.color}}),c=a.custom_thread_labels.nodes.map(function(a){return{id:a.id,name:a.name,color:a.label_color}}),d=a.page;d=d==null?null:d.id;return{flagged:a.is_flagged,pageID:d,customTags:b,customLabels:c}}}function l(a){var c=a.thread_key.other_user_id;if(c==null)return!1;else{a=a.all_participants.edges;return b("bs_array").fold_left(function(a,b){b=b.node.messaging_actor;if(b.id===c)return b.__typename==="User";else return a},!1,a)}}function m(a){if(a.length!==0){var b={};a.forEach(function(a){var c=a.nickname;if(c==null)return 0;else{b[a.participant_id]=c;return 0}});return b}else return null}function n(a){return"#"+b("bs_string").sub(a,2,a.length-2|0)}function o(a){if(a==null||a==="")return null;else return n(a)}function a(a){return a.thread_key.thread_fbid}function c(a){return a.thread_key.other_user_id}function d(a){return b("bs_caml_option").nullable_to_opt(b("getByPath")(a,["messages","page_info"]))}function e(a){var c=b("CurrentUser").isWorkUser();c=c?g._("Usu\u00e1rio do Workplace"):g._("Usu\u00e1rio do Facebook");return{id:"fbid:"+a,fbid:b("FBID.bs").ofStringExn(a),gender:b("GenderConst").UNKNOWN_SINGULAR,href:null,image_src:null,big_image_src:null,name:c,short_name:c,user_type:null,vanity:null,accepts_messenger_user_feedback:!1,is_friend:!1,is_viewer_managing_parent:!1,is_messenger_user:!1,is_aloha_proxy_confirmed:!1,is_business_enabled:!1,is_messenger_platform_bot:!1,is_messenger_ignored:null,is_messenger_blocked:!1,is_facebook_blocked:!0,is_subscribed_to_page_updates:!1,title:null,company_name:null,employee:!1,instant_game_channel:null,work_foreign_entity_info:null,timezone:null,wec_group_admins:[],wec_group_creation_time:null,wec_group_invite_link:null,wec_group_participant_count:null,wec_group_participants:[],verification_status:null}}function p(a){var c=a.profile_picture_url;if(c==null){var d=a.big_image_src;d=d==null?null:d.uri}else d=c;c=a.gender;var e=a.url,f;if(e==null)f=null;else{var g=b("isMessengerDotComURI")(new(h||(h=b("URI")))(e));f=g?new(h||(h=b("URI")))(e).getUnqualifiedURI().setDomain("www.facebook.com").setProtocol("https").toString():e}g=a.__typename;var i;switch(g){case"MessengerCallGuestUser":i=b("MercuryParticipantTypes").GUEST;break;case"NeoApprovedUser":i=b("MercuryParticipantTypes").PARENT_APPROVED_USER;break;case"Page":i=b("MercuryParticipantTypes").PAGE;break;case"User":i=b("MercuryParticipantTypes").USER;break;default:i=null}e=a.accepts_messenger_user_feedback;g=a.is_viewer_friend;var j=a.is_viewer_managing_parent,k=a.is_messenger_user,l=a.is_aloha_proxy_confirmed,m=a.is_messenger_platform_bot,n=a.is_message_blocked_by_viewer,o=a.is_blocked_by_viewer,p=a.is_viewer_subscribed_to_message_updates,q=a.work_info,r;if(q==null)r=null;else{var s=q.work_community;s=s==null?null:s.name;q=q.job_title;r=s==null?q==null?null:q:q==null||q.length===0?s:""+(String(q)+(" \u2022 "+(String(s)+"")))}q=a.work_info;if(q==null)s=null;else{q=q.work_community;q=q==null?null:q.name;var t=a.work_foreign_entity_info;s=q==null||t==null||t.type!==b("WorkForeignEntityType").FOREIGN?null:q}t=a.is_employee;q=a.work_foreign_entity_info;var u=a.wec_group_creation_time,v=a.wec_group_invite_link,w=a.wec_group_participants,x=a.wec_group_participants,y=a.wec_group_admins;return{id:"fbid:"+a.id,fbid:a.id,gender:c==null?b("GenderConst").NOT_A_PERSON:c===b("DisplayGenderConst").MALE?b("GenderConst").MALE_SINGULAR:c===b("DisplayGenderConst").FEMALE?b("GenderConst").FEMALE_SINGULAR:b("GenderConst").NOT_A_PERSON,href:f,image_src:d,big_image_src:d,name:a.name,short_name:b("bs_belt_Option").getWithDefault(b("bs_caml_option").nullable_to_opt(a.short_name),a.name),user_type:i,vanity:a.username,accepts_messenger_user_feedback:e==null?!1:e,is_friend:g==null?!1:g,is_viewer_managing_parent:j==null?!1:j,is_messenger_user:k==null?!1:k,is_aloha_proxy_confirmed:l==null?!1:l,is_business_enabled:a.__typename==="Page",is_messenger_platform_bot:m==null?!1:m,is_messenger_ignored:null,is_messenger_blocked:n==null?!1:n,is_facebook_blocked:o==null?!1:o,is_subscribed_to_page_updates:p==null?!0:p,title:r,company_name:s,employee:t==null?!1:t,instant_game_channel:a.__typename==="Page"?a.instant_game_channel:null,work_foreign_entity_info:q==null?null:q,timezone:null,wec_group_creation_time:u==null?null:u,wec_group_invite_link:v==null?null:v,wec_group_participant_count:w==null?null:w.count,wec_group_participants:x==null?[]:x.nodes.map(function(a){return{id:b("MercuryIDs").getParticipantIDFromUserID(a.messaging_actor.id),name:a.messaging_actor.name}}),wec_group_admins:y==null?[]:y.nodes.map(function(a){return{id:b("MercuryIDs").getParticipantIDFromUserID(a.messaging_actor.id),name:a.messaging_actor.name}}),verification_status:a.verification_status}}function q(a){return a.all_participants.edges.map(function(a){return p(a.node.messaging_actor)})}function r(a,c){c=c.read_receipts;if(c==null)return;else{var d={};c.nodes.forEach(function(c){var e=c.actor;if(!(e==null)&&a!==e.id){d[e.id]={action:b("bs_caml_format").caml_float_of_string(c.action),watermark:b("bs_caml_format").caml_float_of_string(c.watermark)};return 0}else return 0});return b("bs_caml_option").some(d)}}function s(a){a=a.delivery_receipts;if(a==null)return[];else return a.nodes.sort(function(a,c){a=b("bs_caml_format").caml_float_of_string(a.timestamp_precise);c=b("bs_caml_format").caml_float_of_string(c.timestamp_precise);if(a>c)return-1;else if(a===c)return 0;else return 1})}function t(a,c,d){var e=c.messages;if(e==null)return;else return e.nodes.map(function(e){return b("MessengerMessageTransformer.bs").transformMessage(a,e,{thread_id:null,thread_fbid:c.thread_key.thread_fbid,other_user_fbid:c.thread_key.other_user_id,folder:c.folder.toLowerCase()},d)})}function u(a,c,d){var e=c.last_message.nodes.map(function(e){var f=b("MessengerMessageTransformer.bs").unsafeCastBlobAttachments(e),g=e.extensible_attachment,h;if(g==null)h=null;else{var i=g.story_attachment,a=g.genie_attachment,c;if(a==null)c=null;else{a=a.genie_message;var d;if(a==null)d=null;else{a=a.story_attachment;d={story_attachment:a==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(a)}}c={genie_message:d}}h={legacy_attachment_id:g.legacy_attachment_id,story_attachment:i==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(i),genie_attachment:c}}return{message_id:e.message_id,snippet:e.snippet,message_sender:e.message_sender,timestamp_precise:e.timestamp_precise,commerce_message_type:e.commerce_message_type,extensible_attachment:h,blob_attachments:f,sticker:e.sticker,extensible_message_admin_text:e.extensible_message_admin_text,platform_xmd_encoded:e.platform_xmd_encoded,extensible_message_admin_text_type:e.extensible_message_admin_text_type,message_unsendability_status:e.message_unsendability_status}}),f={id:c.id,thread_key:c.thread_key,name:c.name,all_participants:c.all_participants,last_message:{nodes:e},unread_count:c.unread_count,message_count:c.messages_count,image:c.image,updated_time_precise:c.updated_time_precise,mute_until:c.mute_until,is_pinned:c.is_pinned,is_pin_protected:c.is_pin_protected,is_viewer_subscribed:c.is_viewer_subscribed,is_canonical_neo_user:c.is_canonical_neo_user,thread_queue_enabled:c.thread_queue_enabled,folder:c.folder,unread_mentions_count:c.unread_mentions_count,has_viewer_archived:c.has_viewer_archived,is_page_follow_up:c.is_page_follow_up,is_page_unresponded_thread:c.is_page_unresponded_thread,cannot_reply_reason:c.cannot_reply_reason,can_viewer_report:c.can_viewer_report,ephemeral_ttl_mode:c.ephemeral_ttl_mode,customization_info:c.customization_info,thread_admins:c.thread_admins,approval_mode:c.approval_mode,joinable_mode:c.joinable_mode,thread_queue_metadata:c.thread_queue_metadata,event_reminders:c.event_reminders,montage_thread:c.montage_thread,last_read_receipt:c.last_read_receipt,related_page_thread:c.related_page_thread,rtc_call_data:c.rtc_call_data,associated_object:c.associated_object,reactions_mute_mode:c.reactions_mute_mode,mentions_mute_mode:c.mentions_mute_mode,privacy_mode:c.privacy_mode,customization_enabled:c.customization_enabled,thread_type:c.thread_type,group_thread_subtype:c.group_thread_subtype,thread_pin_timestamp:c.thread_pin_timestamp,page_unsubscribe_status:c.page_unsubscribe_status,participant_add_mode_as_string:c.participant_add_mode_as_string,participants_event_status:c.participants_event_status,marketplace_thread_data:c.marketplace_thread_data,page_comm_item:c.page_comm_item,group_approval_queue:c.group_approval_queue,admin_model_status_string:c.admin_model_status_string,groups_sync_status_string:c.groups_sync_status_string,work_groups_sync_metadata:c.work_groups_sync_metadata,pinned_messages:c.pinned_messages,description:c.description,joinable_link:c.joinable_link,linked_mentorship_programs:c.linked_mentorship_programs,theme:c.thread_theme,thread_connectivity_data:c.thread_connectivity_data,thread_unsendability_status:c.thread_unsendability_status,is_business_page_active:c.is_business_page_active,thread_associated_job_applications:c.thread_associated_job_applications,thread_associated_page_admin:c.thread_associated_page_admin};e=f.customization_info;if(e==null)c=[null,null,null];else{var g=e.emoji;c=[o(e.outgoing_bubble_color),g==null?null:{emoji:g},m(e.participant_customizations)]}g=c[0];e=f.theme;if(e==null)g=[g,g,g,[],null,void 0,null,null];else{var h=e.reaction_pack,p;if(h==null)p=void 0;else{h=h.reaction_assets;p=h==null?void 0:h.nodes.map(function(a){return{reactionName:a.reaction_name,reactionEmoji:a.reaction_emoji,keyframeAssetUri:a.keyframe_asset_uri,staticAssetUri:a.static_asset.uri}})}h=e.gradient_colors.length;var q=n(e.fallback_color),r=b("FBID.bs").ofString(e.id);r=r!==void 0?b("bs_caml_option").valFromOption(r):null;if(h>0&&b("ChatConfig").get("chat_tab_has_gradients")){var s=e.gradient_colors.map(n);g=[q,b("bs_caml_array").caml_array_get(s,0),b("bs_caml_array").caml_array_get(s,h-1|0),s,r,p,e.accessibility_label,e.reverse_gradients_for_radial]}else g=[q,q,q,[],r,p,e.accessibility_label,e.reverse_gradients_for_radial]}h=f.page_comm_item;s=h==null?[null,null,null,null,null,[]]:[h.comm_status,h.comm_source_id,h.id,h.subtitle,h.comm_item_owners,h.comm_icon_type];q=f.last_message.nodes;r=q.length!==0?b("bs_caml_option").some(q[0]):void 0;p=f.last_read_receipt.nodes;e=p.length!==0?b("bs_caml_option").some(p[0]):void 0;if(r!==void 0){h=b("bs_caml_option").valFromOption(r);q=b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:h.extensible_attachment,blob_attachments:h.blob_attachments,sticker:h.sticker},h.message_id,d)}else q=[];if(r!==void 0){p=b("bs_caml_option").valFromOption(r).extensible_message_admin_text;if(p==null)h=null;else{d=p.game;h=d==null?null:d.id}}else h=null;p=b("MessengerThreadCannotReplyReason.bs").fromName(f.cannot_reply_reason);d=f.thread_key.other_user_id;if(d==null){var t=f.thread_key.thread_fbid;t=t==null?null:t}else t=d;d=b("bs_array").fold_left(function(a,c){a[c.id]=b("MessengerGroupAdminType").REGULAR_ADMIN;return a},{},f.thread_admins);d=b("bs_array").fold_left(function(a,c){var d=c.node.messaging_actor.id;c=c.admin_type;var e=b("bs_js_dict").get(a,d);c==null||e!==void 0&&(a[d]=c);return a},d,f.all_participants.edges);var u=f.thread_queue_metadata,v=f.thread_type,w=f.group_thread_subtype,x=f.montage_thread,y=f.image,z=f.thread_key.other_user_id,A;if(r!==void 0){var B=b("bs_caml_option").valFromOption(r).platform_xmd_encoded;if(B==null)A=!1;else{try{B=JSON.parse(B)}catch(a){B={}}B=b("bs_js_json").classify(B);A=typeof B==="number"||B.tag!==2?!1:b("bs_js_dict").get(B[0],"landing_exp")!==void 0}}else A=!1;B=f.thread_queue_metadata;var C=f.event_reminders.nodes,D=f.name,E=f.associated_object,F;if(E==null)F=null;else{E=E.group_general_chat;if(E==null||t==null)F=null;else{E=E.id===t;F=E?b("MessengerObjectAssociationType").GENERAL_CHAT:b("MessengerObjectAssociationType").REGULAR_CHAT}}E=f.rtc_call_data;var G;if(E==null)G=null;else{var H=E.initiator;G={call_state:E.call_state,server_info_data:E.server_info_data,initiator_fbid:H==null?null:b("bs_js_null_undefined").fromOption(b("FBID.bs").ofString(H.id))}}E=f.marketplace_thread_data;if(E==null)H=null;else{var I=E.for_sale_item,J;if(I==null)J=null;else{var K=I.formatted_price,L=I.location,M;if(L==null)M=null;else{L=L.reverse_geocode;M={reverse_geocode:L==null?null:{city:L.city,state:L.state}}}L=I.primary_photo;var N;if(L==null)N=null;else{L=L.image;N=L==null?null:L.uri}L=I.product_item;J={id:I.id,story_id:I.story_id,title:I.group_commerce_item_title,price:K==null?null:K.text,location:M,is_pending:I.is_pending,is_sold:I.is_sold,inventory_count:I.inventory_count,delivery_types:I.delivery_types,image_uri:N,is_commerce_post_item:L==null?!1:L.is_commerce_post_item,url:I.url}}K=E.buyer;M=E.seller;N=E.rating_state;H={for_sale_item:J,buyer_fbid:K==null?null:K.id,seller_fbid:M==null?null:M.id,is_eligible_to_rate:N==null?null:N.is_eligible_to_rate,eligible_profile_selling_invoice_actions:E.eligible_profile_selling_invoice_actions,thread_fbid:t}}L=f.group_approval_queue;I=f.work_groups_sync_metadata;if(I==null)J=null;else{K=I.fb_group;J=K==null?null:K}M=f.pinned_messages;N=f.linked_mentorship_programs;E=f.thread_associated_job_applications;return{admins:d,approval_mode:f.approval_mode,approval_queue_ids:u==null?[]:u.approval_requests.nodes.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(a.id))}),can_reply:p===void 0,cannot_reply_reason:p!==void 0?b("bs_caml_option").valFromOption(p):null,can_viewer_report:f.can_viewer_report,solid_color:g[0],header_color:g[1],footer_color:g[2],accessibility_label:g[6],reverse_gradients_for_radial:g[7],gradient_colors:g[3],theme_id:g[4],reactions:g[5],thread_connectivity_data:f.thread_connectivity_data,custom_like_icon:c[1],custom_nickname:c[2],customization_enabled:f.customization_enabled,thread_type:v==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessagingThreadType"),v)),group_thread_subtype:w==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessengerGroupThreadSubType"),w)),page_unsubscribe_status:f.page_unsubscribe_status,participant_add_mode:f.participant_add_mode_as_string,ephemeral_ttl_mode:f.ephemeral_ttl_mode,folder:f.folder.toLowerCase(),has_email_participant:p!==void 0?b("bs_caml_option").valFromOption(p)===b("MessengerThreadCannotReplyReason").HAS_EMAIL_PARTICIPANT:!1,has_montage:!(x==null),unread_mentions_count:f.unread_mentions_count,image_src:y==null?null:y.uri,is_archived:f.has_viewer_archived,is_pinned:f.is_pinned,is_page_follow_up:f.is_page_follow_up,is_page_unresponded_thread:f.is_page_unresponded_thread,is_canonical_user:l(f),is_canonical:!(z==null),is_from_weak_entry_point:A,is_pin_protected:f.is_pin_protected,is_subscribed:f.is_viewer_subscribed,is_canonical_neo_user:f.is_canonical_neo_user,is_thread_queue_enabled:!(B==null),joinable_mode:{mode:b("bs_caml_format").caml_int_of_string(f.joinable_mode.mode),link:f.joinable_mode.link},last_message_timestamp:r!==void 0?b("bs_caml_format").caml_float_of_string(b("bs_caml_option").valFromOption(r).timestamp_precise):0,last_message_id:null,last_message_type:r!==void 0?b("bs_caml_option").valFromOption(r).commerce_message_type:null,last_message_admin_text_type:r!==void 0?b("bs_caml_option").valFromOption(r).extensible_message_admin_text_type:null,last_message_unsendability_status:r!==void 0?b("bs_caml_option").valFromOption(r).message_unsendability_status:null,last_read_timestamp:e!==void 0?b("bs_caml_format").caml_float_of_string(b("bs_caml_option").valFromOption(e).timestamp_precise):0,lightweight_event:C.length!==0?i(C[0]):null,lightweight_events:b("bs_array").fold_left(function(a,b){a[b.id]=i(b);return a},{},f.event_reminders.nodes),message_count:f.message_count,mute_until:f.mute_until,name:D==null?"":D,object_association_type:F,other_user_fbid:f.thread_key.other_user_id,page_thread_info:k(f),participants:f.all_participants.edges.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.node.messaging_actor.id)}),participants_event_status:f.participants_event_status,read_only:p!==void 0?b("bs_caml_option").valFromOption(p)===b("MessengerThreadCannotReplyReason").READ_ONLY:!1,recipients_loadable:p!==void 0?b("bs_caml_option").valFromOption(p)!==b("MessengerThreadCannotReplyReason").RECIPIENTS_NOT_LOADABLE:!0,server_timestamp:b("bs_caml_format").caml_float_of_string(f.updated_time_precise),snippet_attachments:q,snippet_sender:r!==void 0?b("MercuryIDs").getParticipantIDFromUserID(b("bs_caml_option").valFromOption(r).message_sender.messaging_actor.id):null,snippet:r!==void 0?b("bs_caml_option").valFromOption(r).snippet:null,thread_fbid:t,thread_id:"",thread_pin_timestamp:f.thread_pin_timestamp,timestamp:b("bs_caml_format").caml_float_of_string(f.updated_time_precise),unread_count:f.unread_count,rtc_call_data:G,marketplace_thread_data:H,associated_object:j(f),reactions_mute_mode:f.reactions_mute_mode==="REACTIONS_NOT_MUTED"?0:1,mentions_mute_mode:f.mentions_mute_mode==="MENTIONS_NOT_MUTED"?0:1,comm_status:s[0],page_comm_item_id:s[2],comm_source_id:s[1],subtitle:s[3],comm_item_owners:s[4],comm_icon_type:s[5],group_approval_queue:L==null?null:L.nodes,game_id:h,admin_model_status:b("MessengerGroupAdminModelStatus.bs").fromNullableString(f.admin_model_status_string),groups_sync_status:b("MessengerGroupsSyncStatus.bs").fromNullableString(f.groups_sync_status_string),work_associated_group:J,pinned_messages:M==null?null:M.map(function(c){var d=c.message;return{message_id:c.message_id,pinning_time:c.pinning_time,message:d==null?null:b("MessengerMessageTransformer.bs").transformMessage(a,d,{thread_id:null,thread_fbid:f.thread_key.thread_fbid,other_user_fbid:f.thread_key.other_user_id,folder:f.folder.toLowerCase()},!1)}}),description:f.description,joinable_link:f.joinable_link,linked_mentorship_programs:N==null?null:N,thread_unsendability_status:b("MessageThreadUnsendabilityStatus.bs").fromNullableString(f.thread_unsendability_status),is_business_page_active:f.is_business_page_active,thread_associated_job_applications:E==null?null:E,thread_associated_page_admin:f.thread_associated_page_admin,graphql_token:f.id}}f.getThreadFBID=a;f.getOtherUserID=c;f.getMessagePageInfo=d;f.getBlockedParticipant=e;f.transformParticipant=p;f.transformParticipants=q;f.transformReadReceipts=r;f.transformDeliveryReceipts=s;f.transformMessages=t;f.transformThread=u}),null);
__d("MessengerParticipantsFetcher.bs",["Promise","BanzaiODS","WebGraphQL","MessengerServerPayloadTransformer.bs","MessengerParticipantsWebGraphQLQuery"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=new(b("MessengerParticipantsWebGraphQLQuery"))(a);return b("WebGraphQL").exec(c,{actorID:null,batchName:"MessengerParticipantsFetcher"})["catch"](function(a){b("BanzaiODS").bumpEntityKey(2966,"messenger_webgraphql","fetch_participants.failure");return b("Promise").reject(a)}).then(function(c){b("BanzaiODS").bumpEntityKey(2966,"messenger_webgraphql","fetch_participants.success");var d=[],e=new Set();c.messaging_actors.forEach(function(a){if(a==null)return 0;else{a=b("MessengerServerPayloadTransformer.bs").transformParticipant(a);e.add(a.fbid);d.push(a);return 0}});c=a.ids.filter(function(a){return!e.has(a)});c.length>0&&c.forEach(function(a){d.push(b("MessengerServerPayloadTransformer.bs").getBlockedParticipant(a));return 0});return d})}f.$$fetch=a}),null);
__d("MessengerParticipants.bs",["fbt","Promise","FBID.bs","bs_curry","bs_js_dict","bs_caml_obj","BanzaiODS","immutable","bs_belt_Array","MercuryIDs","bs_caml_option","CurrentUser","MercuryAssert","ImmutableObject","bs_js_null_undefined","MercuryVanityIDMap.bs","MercuryParticipantTypes","MessengerParticipantsFetcher.bs"],(function(a,b,c,d,e,f,g){"use strict";var h=[1],i={},j=new Set(),k={},l=function(b,a){delete b[a];return 0},m=function(b,a){delete b[a];return 0};function n(a){a=b("CurrentUser").isWorkUser();if(a)return g._("Usu\u00e1rio do Workplace");else return g._("Usu\u00e1rio do Facebook")}function o(a){var c=a.user_type;if(c==null||!(b("bs_caml_obj").caml_equal(c,b("MercuryParticipantTypes").USER)||b("bs_caml_obj").caml_equal(c,b("MercuryParticipantTypes").FRIEND)))return a;else{c=a.href;var d=a.vanity;if(c==null&&d==null){c=n(0);return Object.assign(a,{name:c,short_name:c})}else return a}}function a(a){Object.keys(i).forEach(function(a){return b("bs_curry")._2(m,i,a)});return 0}function c(a){a=a.participants;if(a==null)return 0;else{a.map(function(a){var c=a.id,d=a.vanity;d==null||b("MercuryVanityIDMap.bs").set(d,c);d=b("bs_js_dict").get(i,c);if(d!==void 0){i[c]=b("ImmutableObject").set(b("bs_caml_option").valFromOption(d),a);return 0}else{i[c]=new(b("ImmutableObject"))(o(a));return 0}});return 0}}function p(a,c){var d={},e=[];a.forEach(function(a){var c=b("bs_js_dict").get(i,a);if(c!==void 0){d[a]=b("bs_caml_option").valFromOption(c);return 0}else{e.push(a);return 0}});if(e.length!==0){var f=[];e.forEach(function(a){if(j.has(a))return 0;else{var c=b("MercuryIDs").getUserIDFromParticipantID(a);if(c==null)return 0;else{f.push(c);j.add(a);return 0}}});var g=h[0].toString();k[g]=[a,c];h[0]=h[0]+1|0;f.length>0&&b("MessengerParticipantsFetcher.bs").$$fetch({ids:f}).then(function(a){a.forEach(function(a){i[a.id]=new(b("ImmutableObject"))(a);var c=a.id;a=a.vanity;a==null||b("MercuryVanityIDMap.bs").set(a,c);j["delete"](c);return 0});Object.keys(k).forEach(function(a){var d=b("bs_js_dict").get(k,a);if(d!==void 0){d=d;var e=d[0],c={};e.forEach(function(d){var a=b("bs_js_dict").get(i,d);if(a!==void 0){c[d]=b("bs_caml_option").valFromOption(a);return 0}else return 0});if(Object.keys(c).length===e.length){b("bs_curry")._2(l,k,a);return d[1](c)}else return 0}else return 0});b("BanzaiODS").bumpEntityKey(2966,"messenger_webgraphql","fetch_participant.success");return b("Promise").resolve(0)})["catch"](function(a){b("BanzaiODS").bumpEntityKey(2966,"messenger_webgraphql","fetch_participant.failure");return b("Promise").resolve(0)});return g}else{c(d);return null}}function d(a,c){b("MercuryAssert").isParticipantID(a);return p([a],function(d){d=b("bs_js_dict").get(d,a);if(d!==void 0)return b("bs_curry")._1(c,b("bs_caml_option").valFromOption(d));else return 0})}function q(a){return b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(i,a))}function r(c,d){var e=[],a=[];c.forEach(function(b){var c=q(b);c==null?e.push(b):a.push(c);return 0});if(e.length!==0){var f=p(e,function(a){return b("bs_curry")._1(d,b("bs_belt_Array").keepMap(c,function(a){return b("bs_caml_option").nullable_to_opt(q(a))}))});return[a,f]}else return[a,null]}function e(a,c){var d=function(a){return b("immutable").Map(a.map(function(a){return[a.id,a]}))},e=function(a){return b("bs_curry")._1(c,d(a))};a=r(a,e);return[d(a[0]),a[1]]}function s(a){return b("bs_curry")._2(l,k,a)}function t(a){if(a==null)return null;else if(b("MercuryVanityIDMap.bs").hasVanity(a)){var c=b("MercuryVanityIDMap.bs").getID(a);if(c==null)return null;else return c}else{c=/^\d+$/;if(c.test(a)){c=b("FBID.bs").ofString(a);if(c!==void 0)return b("MercuryIDs").getParticipantIDFromUserID(b("bs_caml_option").valFromOption(c));else return null}else return null}}f.reset=a;f.addParticipants=c;f.getDefaultName=n;f.get=d;f.getNow=q;f.getMulti=p;f.getMultiEager=r;f.getMultiEagerMap=e;f.removeCallback=s;f.getIDFromVanityOrFBID=t}),null);
__d("MessengerParticipantsImages.bs",["bs_curry","bs_js_dict","MercuryIDs","bs_caml_option","MercuryAssert","ImageSourceType","ImmutableObject","bs_js_null_undefined","ImageSourceRequest","PhotoResizeModeConst","MessengerParticipants.bs","MercuryParticipantsConstants"],(function(a,b,c,d,e,f){"use strict";function g(a,c,d){new(b("ImageSourceRequest"))().setFBID(b("bs_js_null_undefined").fromOption(b("bs_caml_option").nullable_to_opt(b("MercuryIDs").getUserIDFromParticipantID(a)))).setType(b("ImageSourceType").PROFILE_PICTURE).setDimensions(c,c).setResizeMode(b("PhotoResizeModeConst").COVER).setCallback(function(c){return b("bs_curry")._2(d,a,c)}).send();return 0}function h(a,c,d,e){b("MercuryAssert").allParticipantIDs(a);var f=[!1],h=b("MessengerParticipants.bs").getMulti(a,function(e){var h={},i=function(d,e){h[d]=e;if(!f[0]&&a.length===Object.keys(h).length)return b("bs_curry")._1(c,h);else return 0},j=function(a,c){var d=b("bs_js_dict").get(e,a);d!==void 0&&(e[a]=b("ImmutableObject").set(b("bs_caml_option").valFromOption(d),{big_image_src:c.uri}));return i(a,c.uri)};Object.keys(e).map(function(a){return a}).forEach(function(a){var c=b("bs_js_dict").get(e,a);if(c!==void 0){c=b("bs_caml_option").valFromOption(c);var f=d===b("MercuryParticipantsConstants").BIG_IMAGE_SIZE;f=f?b("bs_caml_option").nullable_to_opt(c.big_image_src):void 0;if(f!==void 0)return i(c.id,f);else return g(a,d,j)}else return g(a,d,j)});return 0});return{remove:function(a){f[0]=!0;if(h==null)return 0;else return b("MessengerParticipants.bs").removeCallback(h)}}}function i(a,c,d){return h(a,c,b("MercuryParticipantsConstants").BIG_IMAGE_SIZE,0)}function a(a,c){return i(a,function(d){return b("bs_curry")._1(c,a.map(function(a){return b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(d,a))}))},0)}function c(a,c,d){return h(a,function(d){return b("bs_curry")._1(c,a.map(function(a){return b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(d,a))}))},d,0)}f.getBigImageMultiWithSize=h;f.getBigImageMulti=i;f.getOrderedBigImageMulti=a;f.getOrderedBigImageMultiWithSize=c}),null);
__d("MessengerParticipantsImages.re",["bs_curry","MessengerParticipantsImages.bs"],(function(a,b,c,d,e,f){a=function(a,c){a=b("bs_curry")._4(b("MessengerParticipantsImages.bs").getBigImageMultiWithSize,a.ids,a.callback,a.size,c);return a};f.getBigImageMultiWithSize=a;c=function(a,c){a=b("bs_curry")._3(b("MessengerParticipantsImages.bs").getBigImageMulti,a.ids,a.callback,c);return a};f.getBigImageMulti=c;d=function(a,c){a=b("bs_curry")._2(b("MessengerParticipantsImages.bs").getOrderedBigImageMulti,a,c);return a};f.getOrderedBigImageMulti=d;e=function(a,c,d){a=b("bs_curry")._3(b("MessengerParticipantsImages.bs").getOrderedBigImageMultiWithSize,a,c,d);return a};f.getOrderedBigImageMultiWithSize=e}),null);
__d("MessengerPersonas.bs",["bs_js_dict","bs_js_null_undefined"],(function(a,b,c,d,e,f){"use strict";var g={};function a(a){if(a==null)return 0;else{var c=b("bs_js_dict").get(g,a.id);if(c!==void 0)return 0;else{g[a.id]=a;return 0}}}function c(a){return b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(g,a))}f.personas=g;f.addPersona=a;f.getNow=c}),null);
__d("MessengerPhotoIconSVGM4React.bs",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");function a(a){var b=a.size;a=a.fill;b=b!==void 0?b:36;return h.jsx("svg",{children:h.jsx("g",{children:h.jsxs("g",{children:[h.jsx("polygon",{points:"0 36 36 36 36 0 0 0"}),h.jsx("path",{d:"M13.5,11 C12.1195,11 11,12.119 11,13.5 C11,14.881 12.1195,16 13.5,16 C14.8805,16 16,14.881 16,13.5 C16,12.119 14.8805,11 13.5,11 M26.638,21.467 L21.2375,18.767 C19.199,17.7485 16.801,17.7485 14.7625,18.767 L9.362,21.467 C9.1955,21.55 9,21.429 9,21.243 L9,11 C9,9.8955 9.8955,9 11,9 L25,9 C26.1045,9 27,9.8955 27,11 L27,21.243 C27,21.429 26.8045,21.55 26.638,21.467 M25,7 L11,7 C8.7905,7 7,8.791 7,11 L7,25 C7,27.209 8.7905,29 11,29 L25,29 C27.209,29 29,27.209 29,25 L29,11 C29,8.791 27.209,7 25,7",fill:a})],id:"Group"}),fill:"none",fillRule:"evenodd"}),className:"_7oal",height:String(b)+"px",width:String(b)+"px",viewBox:"0 0 36 36"})}c=a;f.make=c}),null);
__d("MessengerPhotoIconSVGM4React.re",["MessengerPhotoIconSVGM4React.bs"],(function(a,b,c,d,e,f){(function(a){return null});a=b("MessengerPhotoIconSVGM4React.bs").make;f.make=a}),null);
__d("MessengerReactIconSVGM4React.bs",["React","bs_belt_Option"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a,c){c=String(b("bs_belt_Option").getWithDefault(c,22))+"px";return g.jsx("svg",{children:g.jsxs("g",{children:[g.jsx("polygon",{points:"0 36 36 36 36 0 0 0"}),g.jsx("path",{d:"M14.4951,17.5 C13.5576,17.5 12.9951,16.75 12.9951,15.5 C12.9951,14.25 13.5576,13.5 14.4951,13.5 C15.4326,13.5 15.9951,14.25 15.9951,15.5 C15.9951,16.75 15.4326,17.5 14.4951,17.5 M21.4951,17.5 C20.5576,17.5 19.9951,16.75 19.9951,15.5 C19.9951,14.25 20.5576,13.5 21.4951,13.5 C22.4326,13.5 22.9951,14.25 22.9951,15.5 C22.9951,16.75 22.4326,17.5 21.4951,17.5 M18.0071,25.0055 C15.7176,25.0055 13.5461,23.9185 12.1981,22.0985 C11.8691,21.6545 11.9626,21.028 12.4061,20.6985 C12.8491,20.369 13.4756,20.4625 13.8041,20.9065 C14.7766,22.2195 16.3481,23.004 18.0071,23.004 C19.6666,23.004 21.2376,22.2195 22.2101,20.9065 C22.5386,20.4625 23.1656,20.3695 23.6086,20.698 C24.0516,21.0275 24.1451,21.6545 23.8166,22.0985 C22.4686,23.9185 20.2971,25.0055 18.0071,25.0055 M18.0001,8 C12.4771,8 8.0001,12.477 8.0001,18 C8.0001,23.523 12.4771,28 18.0001,28 C23.5231,28 28.0001,23.523 28.0001,18 C28.0001,12.477 23.5231,8 18.0001,8 M18.0001,30 C11.3726,30 6.0001,24.6275 6.0001,18 C6.0001,11.3725 11.3726,6 18.0001,6 C24.6276,6 30.0001,11.3725 30.0001,18 C30.0001,24.6275 24.6276,30 18.0001,30",fill:a})],fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"}),height:c,width:c,viewBox:"0 0 36 36"})}function c(a){return g.jsx("svg",{children:g.jsxs("g",{children:[g.jsx("polygon",{points:"0,26 26,26 26,0 0,0 "}),g.jsx("path",{d:"m19.1311,16.73095c-0.4325,-0.3545 -1.0775,-0.302 -1.441,0.122c-1.171,1.3615 -2.883,2.142 -4.697,2.142c-1.8135,0 -3.526,-0.7805 -4.697,-2.142c-0.363,-0.4225 -1.008,-0.4765 -1.441,-0.122c-0.432,0.355 -0.488,0.986 -0.1245,1.408c1.5605,1.8145 3.8435,2.855 6.2625,2.855c2.4195,0 4.702,-1.0405 6.2625,-2.855c0.3635,-0.422 0.3075,-1.053 -0.1245,-1.408m-2.1355,-7.731c-0.9375,0 -1.5,0.75 -1.5,2c0,1.25 0.5625,2 1.5,2c0.9375,0 1.5,-0.75 1.5,-2c0,-1.25 -0.5625,-2 -1.5,-2m-8,0c-0.9375,0 -1.5,0.75 -1.5,2c0,1.25 0.5625,2 1.5,2c0.9375,0 1.5,-0.75 1.5,-2c0,-1.25 -0.5625,-2 -1.5,-2m4.0045,16c-6.6275,0 -12,-5.3725 -12,-12c0,-6.6275 5.3725,-12 12,-12c6.6275,0 12,5.3725 12,12c0,6.6275 -5.3725,12 -12,12",fill:a})],fill:"none",fillRule:"evenodd"}),height:"24px",width:"24px",viewBox:"0 0 26 26"})}f.make=a;f.makeSolid=c}),null);
__d("MessengerReactIconSVGM4React.re",["bs_curry","MessengerReactIconSVGM4React.bs"],(function(a,b,c,d,e,f){a=function(a,c){a=b("bs_curry")._2(b("MessengerReactIconSVGM4React.bs").make,a,c==null?void 0:c);return a};f.make=a;c=function(a){a=b("MessengerReactIconSVGM4React.bs").makeSolid(a.fill);return a};f.makeSolid=c}),null);
__d("MessengerReactionsUtil.bs",["gkx","bs_js_dict","EmojiFormat.bs","MessengerReactionNames","WorkChatRedesignedMessageListCheck.bs"],(function(a,b,c,d,e,f){"use strict";if(b("WorkChatRedesignedMessageListCheck.bs").enabled){d=[[(c=b("MessengerReactionNames")).THUMBSUP,[128077]],[c.LOVE,[128525]],[c.HAHA,[128518]],[c.WOW,[128558]],[c.SAD,[128546]],[c.ANGRY,[128544]]]}else{e=b("gkx")("1333897");d=[[b("MessengerReactionNames").LOVE,[e?10084:128525]],[b("MessengerReactionNames").HAHA,[128518]],[b("MessengerReactionNames").WOW,[128558]],[b("MessengerReactionNames").SAD,[128546]],[b("MessengerReactionNames").ANGRY,[128544]],[b("MessengerReactionNames").THUMBSUP,[128077]],[b("MessengerReactionNames").THUMBSDOWN,[128078]]]}var g={};d.forEach(function(a,c){g[b("EmojiFormat.bs").codeArrayToUnicode(a[1])]=c+1|0;return 0});function a(a,c){a=b("bs_js_dict").get(g,a);c=b("bs_js_dict").get(g,c);if(a!==void 0)if(c!==void 0)return a-c|0;else return-1;else if(c!==void 0)return 1;else return 0}c=d.map(function(a){return b("EmojiFormat.bs").codeArrayToUnicode(a[1])});f.reactionsSortOrder=d;f.orderMap=g;f.sortFunction=a;f.defaultReactions=c}),null);
__d("MessengerReactionsUtil.re",["bs_curry","MessengerReactionsUtil.bs"],(function(a,b,c,d,e,f){a=b("MessengerReactionsUtil.bs").reactionsSortOrder.map(function(a){return{name:a[0],emojis:a[1]}});f.reactionsSortOrder=a;c=function(a,c){a=b("bs_curry")._2(b("MessengerReactionsUtil.bs").sortFunction,a,c);return a};f.sortFunction=c;d=b("MessengerReactionsUtil.bs").defaultReactions;f.defaultReactions=d}),null);
__d("MessengerRealtimeAttachmentTransformer.bs",["MessengerMessageTransformer.bs","MessengerAttachmentTransformer.bs"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){var e=b("MessengerMessageTransformer.bs").unsafeCastBlobAttachments(c),f=c.extensible_attachment,g;if(f==null)g=null;else{var h=f.story_attachment,i=f.genie_attachment,j;if(i==null)j=null;else{i=i.genie_message;var k;if(i==null)k=null;else{i=i.story_attachment;k={story_attachment:i==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(i)}}j={genie_message:k}}g={legacy_attachment_id:f.legacy_attachment_id,story_attachment:h==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(h),genie_attachment:j}}return b("MessengerAttachmentTransformer.bs").transformAttachment(a,{extensible_attachment:g,blob_attachments:e,sticker:c.sticker},null,d)}f.transform=a}),null);
__d("MessengerSharedPhotosVideosBaseData.bs",["bs_js_dict"],(function(a,b,c,d,e,f){"use strict";var g={};function a(a){return b("bs_js_dict").get(g,a)}function h(a,b){g[a]=b;return 0}function c(a,c){var d=b("bs_js_dict").get(g,a);if(d!==void 0){d=d;var e=d[1];if(e!==void 0){e=e;var f=e[0];if(f.length!==0){f=f.filter(function(a){return!c.some(function(b){return b===a.node.legacy_attachment_id})});d=d[0];f=[f,e[1],e[2],e[3]];e=[d,f];return h(a,e)}else return 0}else return 0}else return 0}f.data=g;f.get=a;f.set=h;f.localRemove=c}),null);
__d("MessengerSourceContext.bs",["React","MercuryTriodeSourceUtil"],(function(a,b,c,d,e,f){"use strict";a=b("React");c=b("MercuryTriodeSourceUtil").getMercuryTriodeSource();d=a.createContext(c);f.defaultContextValue=c;f.context=d}),null);
__d("MessengerSourceContext.re",["MessengerSourceContext.bs"],(function(a,b,c,d,e,f){a=b("MessengerSourceContext.bs").context;f.context=a}),null);
__d("MessengerSurfaceType.bs",[],(function(a,b,c,d,e,f){"use strict";a="MESSENGER";b="WORK_QUIKCHAT";f.messenger=a;f.workQuickchat=b}),null);
__d("MessengerSurfaceContext.bs",["React","MessengerSurfaceType.bs"],(function(a,b,c,d,e,f){"use strict";a=b("React");c=a.createContext(b("MessengerSurfaceType.bs").messenger);d=b("MessengerSurfaceType.bs").messenger;f.defaultValue=d;f.context=c}),null);
__d("MessengerSurfaceContext.re",["MessengerSurfaceContext.bs"],(function(a,b,c,d,e,f){a=b("MessengerSurfaceContext.bs").context;f.context=a}),null);
__d("MessengerSurfaceQuickChat.bs",["React","MessengerSurfaceType.bs","MessengerSurfaceContext.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){a=g.useContext(b("MessengerSurfaceContext.bs").context);return a===b("MessengerSurfaceType.bs").workQuickchat}f.useIsQuickChatSurface=a}),null);
__d("MessengerSurfaceQuickChat.re",["MessengerSurfaceQuickChat.bs"],(function(a,b,c,d,e,f){a=b("MessengerSurfaceQuickChat.bs").useIsQuickChatSurface;f.useIsQuickChatSurface=a}),null);
__d("MessengerSurfaceType.re",["MessengerSurfaceType.bs"],(function(a,b,c,d,e,f){a=b("MessengerSurfaceType.bs").messenger;f.messenger=a;c=b("MessengerSurfaceType.bs").workQuickchat;f.workQuickchat=c}),null);
__d("MessengerThreadFetcher.bs",["Promise","bs_curry","gkx","FBIDCheck","bs_belt_Array","bs_caml_int32","LogHistory","MercuryIDs","bs_caml_option","MercuryDispatcher","MercuryThreadIDMap","MercuryPayloadSource","bs_caml_builtin_exceptions","setTimeoutAcrossTransitions","MessengerGraphQLThreadFetcher.bs"],(function(a,b,c,d,e,f){"use strict";var g=new Map();function h(a,c){var d=c.other_user_fbid;if(d==null){c=c.thread_fbid;if(c==null)throw[b("bs_caml_builtin_exceptions").invalid_argument,"Encountered thread with no server identifier"];else c=[c,b("MercuryIDs").getThreadIDFromThreadFBID(c)]}else c=[d,b("MercuryIDs").getThreadIDFromUserID(d)];d=c[1];c=c[0];a=b("MercuryThreadIDMap").getForFBID(a);var e={},f=a.getClientIDFromServerIDNow(c);if(f==null){b("gkx")("1199097")&&b("LogHistory").getInstance("MessengerThreadFetcher").debug("setServerIDToClientID",d);a.setServerIDToClientID(c,d);e[c]=d;return[d,e]}else return[f,e]}function i(a,c,d){var e=!b("FBIDCheck").isUser_deprecated(a);return b("MessengerGraphQLThreadFetcher.bs").fetchAll(a,[{id:c,limit:0,loadReadReceipts:!1,loadDeliveryReceipts:!1,timestamp:null,isCanonical:d}],e).then(function(c){c=b("bs_belt_Array").get(c,0);if(c!==void 0){c=b("bs_caml_option").valFromOption(c).thread;if(c==null)return b("Promise").resolve(!1);else{var d=h(a,c);b("MercuryDispatcher").getForFBID(a).handleUpdate({threads:[Object.assign(c,{thread_id:d[0]})],pinned_thread_ids:[],newlyAddedClientIDs:d[1],actions:[],preprocessed:!0,payload_source:b("MercuryPayloadSource").SERVER_FETCH_THREAD_INFO});return b("Promise").resolve(!0)}}else return b("Promise").resolve(!1)})}function j(a,c,d){return i(a,c,d).then(function(d){var e=g.get(a);if(e==null)return b("Promise").resolve(!1);else{var f=e.get(c);if(f==null)return b("Promise").resolve(!1);else{b("bs_belt_Array").forEach(f[1],function(a){return b("bs_curry")._1(a,d)});e["delete"](c);return b("Promise").resolve(d)}}})["catch"](function(e){var f=g.get(a);if(f==null)return b("Promise").resolve(!1);else{e=f.get(c);if(e==null)return b("Promise").resolve(!1);else{var h=e[1];e=e[0];if(e<5||b("gkx")("678666")){var k=b("bs_caml_int32").imul(Math.pow(2,Math.min(e,5)),1e3),l=new(b("Promise"))(function(e,g){b("setTimeoutAcrossTransitions")(function(g){i(a,c,d).then(function(a){e(a);b("bs_belt_Array").forEach(h,function(c){return b("bs_curry")._1(c,a)});f["delete"](c);return b("Promise").resolve(a)})["catch"](function(b){return j(a,c,d)});return 0},k);return 0});f.set(c,[e+1|0,h]);return l}else{f["delete"](c);return b("Promise").resolve(!1)}}}})}function a(a,b,c,d){var e=g.get(a);if(e==null){var f=new Map();f.set(b,[0,[d]]);g.set(a,f);j(a,b,c);return 0}else{f=e.get(b);if(f==null){e.set(b,[0,[d]]);j(a,b,c);return 0}else{f[1].push(d);return 0}}}f.$$fetch=a}),null);
__d("MessengerDeltaTransformer.bs",["Promise","FBID.bs","bs_block","bs_curry","gkx","bs_js_dict","bs_js_json","bs_caml_obj","FBIDCheck","bs_belt_Array","bs_caml_array","DateConsts","LogHistory","MercuryIDs","bs_belt_Option","bs_caml_option","MessagingTag","MessengerState.bs","MontageActions","bs_js_null_undefined","MercuryActionType","MercuryDispatcher","MSuggestionActions","MercuryThreadIDMap","PageCommItemStatus","MercuryPayloadSource","MercuryProfileRanges","MercuryLogMessageType","MercuryServerRequests","MercurySyncDeltaTypes","MessagingThreadAction","MessageThreadReadState","MessengerThreadFetcher.bs","bs_caml_builtin_exceptions","MercuryGlobalActionType","MessengerWebDeltaEvents","PagesMessagingEventType","MessengerGroupsSyncStatus","MessengerGroupsSyncStatus.bs","MessageUnsendabilityStatus.bs","MessengerApprovalModeTypes","MessengerMessageDFFFetcher.bs","IrisProtocolMessageLifetime","MessengerApprovalQueueTypes","MessengerGroupRequestSource","MercuryMessageCustomizations","MessageThreadReadStateEffect","MessengerParticipantsFetcher.bs","MessengerWebDeltasTypedLogger","ChatReliabilityInstrumentation","RepliedToMessageStatusForGraphQL","ClientSyncProtocol_GroupsSyncAction","MessengerRealtimeAttachmentTransformer.bs","MessengerWebDeltasTypedLoggerBootloader.bs","MessageLiveLocationClientSyncProtocolStopReason"],(function(a,b,c,d,e,f){"use strict";function g(a){try{return JSON.parse(a)}catch(a){return{}}}c=b("gkx")("780647");var h=c?0:1;function i(a,c){var d=b("bs_belt_Option").map(b("bs_caml_option").nullable_to_opt(c.otherUserFbId),function(a){return a.toString()});c=b("bs_belt_Option").map(b("bs_caml_option").nullable_to_opt(c.threadFbId),function(a){return a.toString()});a=b("MercuryThreadIDMap").getForFBID(a);if(d!==void 0){d=d;d=[b("bs_caml_option").some(b("MercuryIDs").getThreadIDFromUserID(b("FBID.bs").ofStringExn(d))),d]}else if(c!==void 0){c=c;d=[b("bs_caml_option").some(b("MercuryIDs").getThreadIDFromThreadFBID(b("FBID.bs").ofStringExn(c))),c]}else d=[void 0,void 0];c=d[1];d=d[0];if(c!==void 0&&d!==void 0){c=c;var e=a.hasClientIDForServerID(c);if(e)return b("bs_caml_option").nullable_to_opt(a.getClientIDFromServerIDNow(c));else return b("bs_caml_option").valFromOption(d)}}function j(a,b,c,d){if(a==null)if(b==null)return[void 0,void 0];else{d=c.toString()!==d;d=d?c:b;return[d.toString(),{otherUserFbId:d,threadFbId:null}]}else return[a.toString(),{otherUserFbId:null,threadFbId:a}]}function k(a,c){var d=parseInt(c.messageMetadata.timestamp,10),e=b("MessageThreadReadStateEffect").extractThreadStateEffectFromDelta(a,c),f=c.messageMetadata.actorFbId.toString(),h=b("bs_caml_obj").caml_equal(e,b("MessageThreadReadState").MARK_UNREAD)&&a!==f,j=!b("FBIDCheck").isUser_deprecated(a),k=c.attachments;k=k==null?[]:b("bs_belt_Array").keepMapU(k,function(e){var c=e.mercury;if(c==null){e=e.mercuryJSON;e=e==null?null:g(e)}else e=c;if(e==null)return;else{c=e.extensible_attachment;var d=e.blob_attachment;e=e.sticker_attachment;e=c==null?d==null?e==null?[]:b("MessengerRealtimeAttachmentTransformer.bs").transform(a,{extensible_attachment:null,blob_attachments:null,sticker:e},j):b("MessengerRealtimeAttachmentTransformer.bs").transform(a,{extensible_attachment:null,blob_attachments:[d],sticker:null},j):b("MessengerRealtimeAttachmentTransformer.bs").transform(a,{extensible_attachment:b("bs_js_null_undefined").fromOption(c==null?void 0:b("bs_caml_option").some(c)),blob_attachments:null,sticker:null},j);return b("bs_belt_Array").get(e,0)}});var l=c.messageMetadata.tags;l=l==null?void 0:b("bs_js_null_undefined").fromOption(b("bs_belt_Array").get(l,0));var m=c.data,n;if(m==null)n=null;else{var o=b("bs_js_dict").get(m,"adminSignatureCreatorID");n=o!==void 0?{creatorID:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(m,"adminSignatureCreatorID")),creatorName:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(m,"adminSignatureCreatorName")),creatorType:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(m,"adminSignatureCreatorType")),labelType:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(m,"adminSignatureLabelType")),pageID:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(m,"adminSignaturePageID")),profileURI:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(m,"adminSignatureProfileURI"))}:null}o=i(a,c.messageMetadata.threadKey);if(o!==void 0){m=c.ttl;var p=c.messageMetadata.threadKey.threadFbId,q=c.messageMetadata.threadKey.otherUserFbId,r=c.body,s=c.data;if(s==null){var t=c.untypedData;t=t==null?!1:b("bs_belt_Option").getWithDefault(b("bs_js_dict").get(t,"is_sponsored"),"false")==="true"}else t=b("bs_belt_Option").getWithDefault(b("bs_js_dict").get(s,"is_sponsored"),"false")==="true";s=c.data;var u=c.data,v;if(u==null)v=null;else{u=b("bs_js_dict").get(u,"customization");v=u!==void 0?b("MercuryMessageCustomizations").parseCustomizations(u):null}u=c.data;var w=c.data,x=c.data,y;if(x==null)y=null;else{x=b("bs_js_dict").get(x,"mib_direct_message_data");y=x!==void 0?g(x):null}x=c.data;var z;if(x==null)z=null;else{x=b("bs_js_dict").get(x,"message_source_data");if(x!==void 0){x=g(x);x=b("bs_js_json").classify(x);if(typeof x==="number"||x.tag!==2)z=null;else{x=b("bs_js_dict").get(x[0],"message_source");z=x!==void 0?b("bs_js_null_undefined").fromOption(x):null}}else z=null}x=c.messageMetadata.skipBumpThread;var A=c.data,B;if(A==null)B=null;else{A=b("bs_js_dict").get(A,"montage_reply_data");B=A!==void 0?g(A):null}A=c.data;var C;if(A==null)C=null;else{A=b("bs_js_dict").get(A,"meta_ranges");C=A!==void 0?g(A):null}return{message_id:c.messageMetadata.messageId,threading_id:null,offline_threading_id:c.messageMetadata.offlineThreadingId,author:b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(f)),author_email:f+"@facebook.com",ephemeral_ttl_mode:m==null?0:b("bs_belt_Option").getWithDefault(b("bs_js_dict").get(b("IrisProtocolMessageLifetime"),m),0),timestamp:d,is_unread:h,is_filtered_content:!1,is_filtered_content_bh:!1,is_filtered_content_account:!1,is_filtered_content_quasar:!1,is_filtered_content_invalid_app:!1,is_one_way_sent:b("bs_belt_Option").getWithDefault(b("bs_caml_option").nullable_to_opt(c.messageMetadata.tags),[]).some(function(a){return a===b("MessagingTag").ONE_WAY_MESSAGE}),is_forwarded:b("bs_belt_Option").getWithDefault(b("bs_caml_option").nullable_to_opt(c.messageMetadata.tags),[]).some(function(a){if(a===b("MessagingTag").ACTION_COPIED_MESSAGE||a===b("MessagingTag").ACTION_COPIED_SELF_MESSAGE||a===b("MessagingTag").ACTION_COPIED_ATTACHMENT)return!0;else return a===b("MessagingTag").ACTION_COPIED_SELF_ATTACHMENT}),source:l,tags:c.messageMetadata.tags,is_spoof_warning:!1,folder:null,thread_fbid:p==null?null:p.toString(),other_user_fbid:q==null?null:q.toString(),body:r==null?"":r,html_body:null,subject:null,has_attachment:k.length!==0,attachments:k,ranges:void 0,thread_id:o,action_type:b("MercuryActionType").USER_GENERATED_MESSAGE,is_from_iris:!0,is_sponsored:t,commerce_message_type:s==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(s,"commerce_message_type")),customizations:v,platform_xmd:u==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(u,"platform_xmd")),profile_ranges:b("MercuryProfileRanges").extractFromDelta(c),verse_group_role_xmd:w==null?null:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(w,"verse_group_role_id")),mib_direct_message_data:y,message_source:z,skip_bump_thread:x==null?!1:x,thread_read_state_effect:e,montage_reply_data:B,meta_ranges:C,creator_info:n,message_unsendability_status:b("MessageUnsendabilityStatus.bs").fromNullableString(c.messageMetadata.unsendType),comm_status:j?b("PageCommItemStatus").TODO:null}}else throw[b("bs_caml_builtin_exceptions").invalid_argument,"invalid thread id"]}function l(a,c){b("LogHistory").getInstance("MessengerDeltaTransformer").debug(a,c);return 0}function m(a,c,d,e){return b("bs_curry")._1(b("MessengerWebDeltasTypedLoggerBootloader.bs").LoadableMessengerWebDeltasTypedLogger.load,function(f){f=new(b("MessengerWebDeltasTypedLogger"))();f=f.setDeltaEvent(a).setDeltaType(c).setIgnoreReason(d).setSyncSeqID(e);f.log();return 0})}function n(a){return m(b("MessengerWebDeltaEvents").DELTA_RECEIVED,a,null,null)}function o(a,c){m(b("MessengerWebDeltaEvents").DELTA_IGNORED,a,c,null);return l("DeltaIgnored",a)}function p(a,c,d,e,f){return b("MessengerThreadFetcher.bs").$$fetch(a,c,d,function(c){if(c){b("MercuryDispatcher").getForFBID(a).handleUpdate({actions:[e],pinned_thread_ids:[],newlyAddedClientIDs:{},preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});return n(f)}else return o(f,"thread fetch failed")})}function q(a,c,d,e){var f=c.other_user_fbid;if(f==null){var g=c.thread_fbid;if(g==null)throw[b("bs_caml_builtin_exceptions").invalid_argument,"invalid thread id"];else g=[g,!1]}else g=[f,!0];f=g[1];g=g[0];var h=b("MercuryThreadIDMap").getForFBID(a);h=h.getClientIDFromServerIDNow(g);var i=h==null?null:b("MessengerState.bs").getThreadMetaNow(a,h),j=b("gkx")("1143875");if(h==null)if(e)return p(a,g,f,c,d);else return o(d,"thread not already loaded, not required to be loaded");else if(i==null)if(e){if(j){p(a,g,f,c,d);l("ThreadMetaMissing",g);b("ChatReliabilityInstrumentation").logTHREAD_INFO_MISSING(b("LogHistory").formatEntries(b("LogHistory").getEntries()));return 0}else if(j)return o(d,"thread not already loaded, not required to be loaded")}else if(j)return o(d,"thread not already loaded, not required to be loaded");b("MercuryDispatcher").getForFBID(a).handleUpdate({actions:[c],pinned_thread_ids:[],newlyAddedClientIDs:{},preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});return n(d)}function r(a,c){var d=c.threadKey.threadFbId,e=d==null?void 0:b("bs_caml_option").some(d);if(d==null){d=c.threadKey.otherUserFbId;var f=d==null?void 0:b("bs_caml_option").some(d);d=d==null?[void 0,void 0]:[f,{otherUserFbId:b("bs_js_null_undefined").fromOption(f),threadFbId:null}]}else d=[e,{otherUserFbId:null,threadFbId:b("bs_js_null_undefined").fromOption(e)}];f=d[1];e=d[0];if(e!==void 0&&f!==void 0){d=i(a,b("bs_caml_option").valFromOption(f));if(d!==void 0)return{thread_id:d,action_type:b("MercuryActionType").REACTION_UPDATE,messageId:c.messageId,offlineThreadingId:c.offlineThreadingId,reaction:c.reaction,senderId:c.senderId.toString(),thread_fbid:e.toString(),other_user_fbid:null,userId:c.userId.toString()};else return}}function s(a){return a/Math.pow(10,8)}function t(a,c){var d=c.threadKey.threadFbId,e=d==null?void 0:b("bs_caml_option").some(d),f=c.threadKey.otherUserFbId,g=f==null?void 0:b("bs_caml_option").some(f);d=d==null?f==null?[void 0,void 0]:[g,{otherUserFbId:null,threadFbId:b("bs_js_null_undefined").fromOption(g)}]:[e,{otherUserFbId:b("bs_js_null_undefined").fromOption(e),threadFbId:null}];f=d[1];g=d[0];if(g!==void 0&&f!==void 0){e=i(a,b("bs_caml_option").valFromOption(f));if(e!==void 0&&c.messageLiveLocations.length===1){d=b("bs_caml_array").caml_array_get(c.messageLiveLocations,0);a=d.expirationTime;f=d.stopReason;c=f==null?Date.now()/b("DateConsts").MS_PER_SEC>a:!0;f=d.coordinate;f=f==null?null:{latitude:s(f.latitude),longitude:s(f.longitude)};var h=d.destination;h=h==null?null:{latitude:s(h.latitude),longitude:s(h.longitude),label:h.label};var j=d.stopReason;j=j==null?null:j===b("MessageLiveLocationClientSyncProtocolStopReason").EXPIRED||j===b("MessageLiveLocationClientSyncProtocolStopReason").CANCELED?"EXPIRED":j===b("MessageLiveLocationClientSyncProtocolStopReason").ARRIVED?"ARRIVED":null;return{thread_id:e,action_type:b("MercuryActionType").LIVE_LOCATION_UPDATE,thread_fbid:g.toString(),other_user_fbid:null,messageId:d.messageId,liveLocation:{live_location_id:d.id.toString(),is_expired:c,expiration_time:a,sender:{id:d.senderId.toString()},coordinate:f,location_title:d.locationTitle,sender_destination:h,stop_reason:j}}}else return}}function u(a,c){var d=c.threadKey.threadFbId;if(d==null)return;else{a=i(a,{otherUserFbId:null,threadFbId:d});if(a!==void 0)return{action_type:b("MercuryActionType").EVENT_RSVP_CHANGED,actor_fbid:c.actorFbId.toString(),rsvp_status:c.rsvpStatus,thread_fbid:d.toString(),other_user_fbid:null,thread_id:a};else return}}function v(a,c){var d=c.threadKey.otherUserFbId;if(d==null)return;else{a=i(a,{otherUserFbId:d,threadFbId:null});if(a!==void 0){c=c.isFollowUp;return{action_type:b("MercuryActionType").UPDATE_COMM_STATUS,comm_status:c?b("PageCommItemStatus").FOLLOW_UP:b("PageCommItemStatus").TODO,thread_fbid:d.toString(),other_user_fbid:null,thread_id:a}}else return}}function w(a,c){var d=[];c.forEach(function(a){a=b("MercuryIDs").getUserIDFromParticipantID(a);if(a==null)return 0;else{d.push(a);return 0}});return b("MessengerParticipantsFetcher.bs").$$fetch({ids:d}).then(function(c){var d=[],e=[];c.forEach(function(a){var b=a.id;if(a.is_messenger_blocked||a.is_facebook_blocked){d.push(b);return 0}else{e.push(b);return 0}});b("MercuryDispatcher").getForFBID(a).handleUpdate({from_client:!0,message_blocked_ids:d,message_unblocked_ids:e});return b("Promise").resolve(0)})["catch"](function(a){return b("Promise").resolve(0)})}function x(a,c){var d=c.actorFbid.toString(),e=b("FBID.bs").ofStringExn(d);if(b("bs_caml_obj").caml_notequal(e,a))e=b("bs_caml_option").some(b("MercuryIDs").getParticipantIDFromUserID(a));else{var f=c.threadKey.otherUserFbId;if(f==null)e=void 0;else{f=b("FBID.bs").ofString(f.toString());e=f!==void 0?b("bs_caml_option").some(b("MercuryIDs").getParticipantIDFromUserID(b("bs_caml_option").valFromOption(f))):void 0}}if(e!==void 0){f=b("bs_caml_option").valFromOption(e);e=c.threadKey.otherUserFbId;if(e==null)return;else{w(a,[f]);a=i(a,{otherUserFbId:e,threadFbId:null});if(a!==void 0)return{action_type:b("MercuryActionType").BLOCK_STATUS_CHANGED,actorFbid:d,canViewerReply:c.canViewerReply,reason:c.reason,message_blocked_ids:[f],other_user_fbid:e.toString(),thread_fbid:null,thread_id:a};else return}}}function y(a,c){var d=c.threadKey.threadFbId;if(d==null){var e=c.threadKey.otherUserFbId;e=e==null?[void 0,void 0]:[e.toString(),{otherUserFbId:e,threadFbId:null}]}else e=[d.toString(),{otherUserFbId:null,threadFbId:d}];d=e[1];e=e[0];if(e!==void 0&&d!==void 0){a=i(a,b("bs_caml_option").valFromOption(d));if(a!==void 0)return{action_type:b("MercuryActionType").MONTAGE_DIRECT_EXPIRE,messageId:c.messageId,timestamp:c.timestamp,thread_fbid:e,other_user_fbid:null,keep_expiry_timestamp:c.keepExpiryTimestamp,thread_id:a};else return}}function z(a,c){var d=k(a,c.message),e=c.repliedToMessage;if(e==null)return b("bs_caml_option").some(d);else{a=k(a,e);e=c.status;var f;if(e==null)f=void 0;else switch(e){case 0:f=b("bs_caml_option").some(b("RepliedToMessageStatusForGraphQL").VALID);break;case 1:f=b("bs_caml_option").some(b("RepliedToMessageStatusForGraphQL").DELETED);break;case 2:f=b("bs_caml_option").some(b("RepliedToMessageStatusForGraphQL").TEMPORARILY_UNAVAILABLE);break;default:f=void 0}if(f!==void 0)return b("bs_caml_option").some(Object.assign(d,{replied_to_message:{status:b("bs_caml_option").valFromOption(f),message:a}}));else return}}function A(a,c){var d=c.threadKey.threadFbId,e=d==null?void 0:b("bs_caml_option").some(d);if(d==null){d=c.threadKey.otherUserFbId;var f=d==null?void 0:b("bs_caml_option").some(d);d=d==null?[void 0,void 0]:[f,{otherUserFbId:b("bs_js_null_undefined").fromOption(f),threadFbId:null}]}else d=[e,{otherUserFbId:null,threadFbId:b("bs_js_null_undefined").fromOption(e)}];f=d[1];e=d[0];if(e!==void 0&&f!==void 0){d=i(a,b("bs_caml_option").valFromOption(f));if(d!==void 0)return{action_type:b("MercuryActionType").GROUPS_SYNC_STATUS_CHANGED,thread_fbid:e.toString(),other_user_fbid:null,actor_fbid:c.actorFbid.toString(),groups_sync_status_string:b("MessengerGroupsSyncStatus.bs").fromNullableString(c.groupsSyncStatus),thread_id:d};else return}}function B(a,c){var d=c.threadKey.threadFbId,e=d==null?void 0:b("bs_caml_option").some(d);if(d==null){d=c.threadKey.otherUserFbId;var f=d==null?void 0:b("bs_caml_option").some(d);d=d==null?[void 0,void 0]:[f,{otherUserFbId:b("bs_js_null_undefined").fromOption(f),threadFbId:null}]}else d=[e,{otherUserFbId:null,threadFbId:b("bs_js_null_undefined").fromOption(e)}];f=d[1];e=d[0];d=c.syncAction===b("ClientSyncProtocol_GroupsSyncAction").OPT_IN?b("bs_caml_option").some(b("MessengerGroupsSyncStatus").OPT_IN):c.syncAction===b("ClientSyncProtocol_GroupsSyncAction").OPT_OUT?b("bs_caml_option").some(b("MessengerGroupsSyncStatus").OPT_OUT):void 0;if(e!==void 0&&d!==void 0&&f!==void 0){a=i(a,b("bs_caml_option").valFromOption(f));if(a!==void 0){f=c.syncedFbGroupId;return{action_type:b("MercuryActionType").GROUPS_SYNC_METADATA_UPDATE,thread_fbid:e.toString(),other_user_fbid:null,actor_fbid:c.actorFbid.toString(),groups_sync_action:b("bs_caml_option").valFromOption(d),source_surface:c.sourceSurface,fb_group_id:f==null?null:f.toString(),thread_id:a,emoji_codepoints:c.emojiCodePoints}}else return}}function C(a,c){var d=c.threadKey.threadFbId;if(d==null)return;else{a=i(a,{otherUserFbId:null,threadFbId:d});if(a!==void 0)return{action_type:b("MercuryActionType").DESCRIPTION_CHANGED,thread_fbid:d.toString(),other_user_fbid:null,group_thread_description_string:c.threadDescription,thread_id:a};else return}}function D(a){return"#"+a.slice(2)}function E(a,c){var d=c.threadKey.threadFbId,e=d==null?void 0:b("bs_caml_option").some(d);if(d==null){d=c.threadKey.otherUserFbId;var f=d==null?void 0:b("bs_caml_option").some(d);d=d==null?[void 0,void 0]:[f,{otherUserFbId:b("bs_js_null_undefined").fromOption(f),threadFbId:null}]}else d=[e,{otherUserFbId:null,threadFbId:b("bs_js_null_undefined").fromOption(e)}];f=d[1];e=d[0];if(e!==void 0&&f!==void 0){d=e;e=i(a,b("bs_caml_option").valFromOption(f));if(e!==void 0){a=e;f=c.fallbackColor!==""?D(c.fallbackColor):"";e=c.reactionPack;var g;if(e==null)g=[void 0,void 0];else{var h=e.reactionAssets;e=e.fontAsset;g=[h==null?void 0:h.map(function(a){return{reactionName:a.reactionName,reactionEmoji:a.reactionEmoji,keyframeAssetUri:a.keyframeAssetUri}}),e==null?void 0:e.assetUri]}h=g[1];e=g[0];g=c.gradientColors;if(!(g==null)&&g.length!==0){g=b("bs_belt_Array").map(g,D);return{action_type:b("MercuryActionType").UPDATE_THREAD_THEME,thread_fbid:d.toString(),other_user_fbid:null,theme_id:c.themeId.toString(),solid_color:f,header_color:b("bs_caml_array").caml_array_get(g,0),footer_color:b("bs_caml_array").caml_array_get(g,g.length-1|0),gradient_colors:g,thread_id:a,reactions:e,reactionFont:h}}return{action_type:b("MercuryActionType").UPDATE_THREAD_THEME,thread_fbid:d.toString(),other_user_fbid:null,theme_id:c.themeId.toString(),solid_color:f,header_color:f,footer_color:f,gradient_colors:[],thread_id:a,reactions:e,reactionFont:h}}else return}}function F(a,c,d,e,f,g){var i=d.threadFbId===null;d=d.otherUserFbId===null;i={action_type:b("MercuryActionType").PIN_MESSAGE,thread_fbid:i?null:c,other_user_fbid:d?null:c,thread_id:e,actor_fbid:f.actorFbid.toString(),pin_message_action:{message:{message_id:f.pinnedMessage.pinnedMessageId,pinning_time:f.pinnedMessage.timestamp,message:g}}};return q(a,i,"DeltaClientDelta.deltaUpdatePinnedMessage",h)}function G(a,c,d){var e=j(c.threadKey.threadFbId,c.threadKey.otherUserFbId,c.actorFbid,a),f=e[1];e=e[0];if(e!==void 0&&f!==void 0){var g=b("bs_caml_option").valFromOption(f),h=e;f=i(a,g);if(f!==void 0){var k=f;e=c.pinnedMessage.pinnedMessageId;f=b("MessengerState.bs").getMessageFromID(a,e);if(f!==void 0)return F(a,h,g,k,c,b("bs_caml_option").valFromOption(f));else{b("MessengerMessageDFFFetcher.bs").fetch_(a,{message_id:e,thread_id:h},!1).then(function(d){F(a,h,g,k,c,d);return b("Promise").resolve(0)})["catch"](function(a){d[0]=b("bs_block").__(1,["DeltaClientDelta.deltaUpdatePinnedMessage","error on fetching pinned message payload"]);return b("Promise").resolve(0)});return 0}}else{d[0]=b("bs_block").__(1,["DeltaClientDelta.deltaUpdatePinnedMessage","transform failed"]);return 0}}else{d[0]=b("bs_block").__(1,["DeltaClientDelta.deltaUpdatePinnedMessage","transform failed"]);return 0}}function H(a,c){var d=j(c.threadKey.threadFbId,c.threadKey.otherUserFbId,c.actorFbid,a),e=d[1];d=d[0];if(d!==void 0&&e!==void 0){e=b("bs_caml_option").valFromOption(e);d=d;a=i(a,e);if(a!==void 0){var f=e.threadFbId===null;e=e.otherUserFbId===null;return{action_type:b("MercuryActionType").UNPIN_MESSAGE,thread_fbid:f?null:d,other_user_fbid:e?null:d,thread_id:a,unpin_message_action:{message_id:c.pinnedMessage.pinnedMessageId},actor_fbid:c.actorFbid.toString()}}else return}}function I(a,c){var d=c.threadKey.threadFbId;if(d==null){var e=c.threadKey.otherUserFbId;e=e==null?[void 0,void 0]:[e.toString(),{otherUserFbId:e,threadFbId:null}]}else e=[d.toString(),{otherUserFbId:null,threadFbId:d}];d=e[1];e=e[0];if(e!==void 0&&d!==void 0){a=i(a,b("bs_caml_option").valFromOption(d));if(a!==void 0)return{action_type:b("MercuryActionType").CHANGE_PINNED_STATUS,thread_fbid:e,other_user_fbid:null,is_pinned:c.isPinned,thread_id:a,thread_pin_timestamp:c.timestamp};else return}}function J(a,c){var d=c.threadKey.threadFbId,e=c.threadKey.otherUserFbId;e=d==null?e==null?[void 0,void 0]:[e.toString(),{otherUserFbId:e,threadFbId:null}]:[d.toString(),{otherUserFbId:null,threadFbId:d}];d=e[1];e=e[0];if(e!==void 0&&d!==void 0){a=i(a,b("bs_caml_option").valFromOption(d));if(a!==void 0){d=c.isSaved;var f=c.isSaved;return{action_type:b("MercuryActionType").MUTATE_TAGS,thread_fbid:e,other_user_fbid:null,thread_id:a,messageId:c.messageId,tags_to_add:d?["message:save"]:[],tags_to_delete:f?[]:["message:save"]}}else return}}function K(a,c){var d=c.threadKey.threadFbId;if(d==null)return;else{a=i(a,{otherUserFbId:null,threadFbId:d});if(a!==void 0)return{action_type:b("MercuryActionType").UPDATE_JOINABLE_LINK,joinable_link:c.privateGroupLink,thread_fbid:d.toString(),other_user_fbid:null,thread_id:a};else return}}function L(a){a=a.directives;if(a==null)return;else{a=b("bs_belt_Array").get(a,0);if(a!==void 0){a=b("bs_caml_option").valFromOption(a).data;if(a==null)return;else{a=a.add_actions;if(a==null)return;else{var c=a.actions;if(c==null)return;else{c=b("bs_belt_Array").get(c,0);if(c!==void 0){c=b("bs_caml_option").valFromOption(c).thread_key;if(c==null)return;else{var d=c.thread_fbid;c=c.other_user_fbid;if(d==null)if(c==null)return;else c=c;else c=d;return{action_type:b("MercuryActionType").CREATE_OMNI_M_SUGGESTIONS,thread_fbid:b("MercuryIDs").getThreadIDFromThreadFBID(b("FBID.bs").ofStringExn(c)),other_user_fbid:null,thread_id:c,suggestions:a}}}else return}}}}else return}}function M(a,c){var d=c.threadKey.threadFbId;if(d==null)return;else{a=i(a,{otherUserFbId:null,threadFbId:d});if(a!==void 0)return{action_type:b("MercuryActionType").PROMOTE_GROUP_ADMINS,thread_fbid:d.toString(),other_user_fbid:null,promoted_admins:b("bs_belt_Array").map(c.promotedAdmins,function(a){return{admin_fbid:a.adminFbId.toString(),admin_type:a.adminType}}),thread_id:a};else return}}function N(a,c){var d=c.threadKey.threadFbId,e=c.threadKey.otherUserFbId;if(d==null)if(e==null)return;else{var f=i(a,{otherUserFbId:e,threadFbId:null});if(f!==void 0)return{action_type:b("MercuryActionType").REMOVE_MESSAGE,thread_fbid:null,messageId:c.messageID,other_user_fbid:e.toString(),removed_timestamp:c.deletionTimestamp,thread_id:f,author:b("MercuryIDs").getParticipantIDFromUserID(c.senderID)};else return}else{e=i(a,{otherUserFbId:null,threadFbId:d});if(e!==void 0)return{action_type:b("MercuryActionType").REMOVE_MESSAGE,thread_fbid:d.toString(),messageId:c.messageID,other_user_fbid:null,removed_timestamp:c.deletionTimestamp,thread_id:e,author:b("MercuryIDs").getParticipantIDFromUserID(c.senderID)};else return}}function O(a,c){var d=c.threadKey.otherUserFbId;if(d==null)return;else{a=i(a,{otherUserFbId:d,threadFbId:null});if(a!==void 0)return{action_type:b("MercuryActionType").UNSUBSCRIBE_STATUS_UPDATE,page_unsubscribe_status:c.unSubscribeStatus,thread_fbid:d.toString(),other_user_fbid:null,thread_id:a};else return}}function P(a,c){var d=c.threadKey.otherUserFbId;if(d==null)return;else{a=i(a,{otherUserFbId:d,threadFbId:null});if(a!==void 0)return{action_type:b("MercuryActionType").BLURRED_IMAGE_STATUS,blurred_image_uri:c.blurredImageUri,image_message_id:c.messageId,image_id:c.imageId,should_show:c.shouldShow,thread_fbid:d.toString(),other_user_fbid:null,thread_id:a};else return}}function Q(a,c){var d=c.threadKey.otherUserFbId;if(d==null)return;else{a=i(a,{otherUserFbId:d,threadFbId:null});if(a!==void 0)return{action_type:b("MercuryActionType").IS_PIN_PROTECTED,thread_fbid:d.toString(),other_user_fbid:null,is_pin_protected:c.isPinProtected,thread_id:a};else return}}function R(a,c){var d=c.threadKey.otherUserFbId;if(d==null)return;else{a=i(a,{otherUserFbId:d,threadFbId:null});if(a!==void 0)return{action_type:b("MercuryActionType").UPDATE_CONNECTIVITY_STATUS,other_user_fbid:d.toString(),subtitle_type:c.subtitleType,thread_connectivity_status:c.threadConnectivityStatus,thread_fbid:d.toString(),thread_id:a};else return}}var S=function(a){return String.fromCharCode.apply(null,a)};function T(a,c){c=JSON.parse(S(c.payload));c=b("bs_js_json").classify(c);if(typeof c==="number"||c.tag!==2)return b("bs_block").__(1,["DeltaClientDelta","malformed payload"]);else{c=b("bs_js_dict").get(c[0],"deltas");if(c!==void 0){c=b("bs_js_json").classify(b("bs_caml_option").valFromOption(c));if(typeof c==="number"||c.tag!==3)return b("bs_block").__(1,["DeltaClientDelta","delta is not an array"]);else{c=b("bs_belt_Array").get(c[0],0);if(c!==void 0){c=b("bs_js_json").classify(b("bs_caml_option").valFromOption(c));if(typeof c==="number"||c.tag!==2)return b("bs_block").__(1,["DeltaClientDelta","client delta is not an object"]);else{c=c[0];var d=!1,e=[0],f=b("bs_js_dict").get(c,"deltaMessageReaction");if(f!==void 0){d=!0;f=r(a,b("bs_caml_option").valFromOption(f));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaMessageReaction",h):e[0]=b("bs_block").__(1,["DeltaClientDelta.deltaMessageReaction","transform failed"])}f=b("bs_js_dict").get(c,"liveLocationData");if(f!==void 0&&!d){d=!0;f=t(a,b("bs_caml_option").valFromOption(f));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.liveLocationData",h):e[0]=b("bs_block").__(1,["DeltaClientDelta.liveLocationData","transform failed"])}f=b("bs_js_dict").get(c,"deltaUpdateGroupEventRSVPStatus");if(f!==void 0&&!d){d=!0;f=u(a,b("bs_caml_option").valFromOption(f));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaUpdateGroupEventRSVPStatus",h):e[0]=b("bs_block").__(1,["DeltaClientDelta.deltaUpdateGroupEventRSVPStatus","transform failed"])}f=b("bs_js_dict").get(c,"deltaPageThreadFollowUpData");if(f!==void 0&&!d){d=!0;f=v(a,b("bs_caml_option").valFromOption(f));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaPageThreadFollowUpData",h):e[0]=b("bs_block").__(1,["DeltaClientDelta.deltaPageThreadFollowUpData","transform failed"])}f=b("bs_js_dict").get(c,"deltaChangeViewerStatus");if(f!==void 0&&!d){d=!0;f=x(a,b("bs_caml_option").valFromOption(f));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaChangeViewerStatus",h):e[0]=b("bs_block").__(1,["DeltaClientDelta.deltaChangeViewerStatus","transform failed"])}f=b("bs_js_dict").get(c,"deltaMontageDirectExpire");if(f!==void 0&&!d){d=!0;f=y(a,b("bs_caml_option").valFromOption(f));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaMontageDirectExpire",h):e[0]=b("bs_block").__(1,["DeltaClientDelta.deltaMontageDirectExpire","transform failed"])}f=b("bs_js_dict").get(c,"deltaMessageReply");if(f!==void 0&&!d){d=!0;f=z(a,b("bs_caml_option").valFromOption(f));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaMessageReply",h):e[0]=b("bs_block").__(1,["DeltaClientDelta.deltaMessageReply","transform failed"])}f=b("bs_js_dict").get(c,"deltaUpdateGroupsSyncStatus");if(f!==void 0&&!d){d=!0;f=A(a,b("bs_caml_option").valFromOption(f));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaUpdateGroupsSyncStatus",h):e[0]=b("bs_block").__(1,["DeltaClientDelta.deltaUpdateGroupsSyncStatus","transform failed"])}f=b("bs_js_dict").get(c,"deltaUpdateGroupsSyncMetadata");if(f!==void 0&&!d){d=!0;f=B(a,b("bs_caml_option").valFromOption(f));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaUpdateGroupsSyncMetadata",h):e[0]=b("bs_block").__(1,["DeltaClientDelta.deltaUpdateGroupsSyncMetadata","transform failed"])}f=b("bs_js_dict").get(c,"deltaGroupThreadDescription");if(f!==void 0&&!d){d=!0;f=C(a,b("bs_caml_option").valFromOption(f));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaGroupThreadDescription",h):e[0]=b("bs_block").__(1,["DeltaClientDelta.deltaGroupThreadDescription","transform failed"])}f=b("bs_js_dict").get(c,"deltaUpdateThreadTheme");if(f!==void 0&&!d){d=!0;f=E(a,b("bs_caml_option").valFromOption(f));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaUpdateThreadTheme",h):e[0]=b("bs_block").__(1,["DeltaClientDelta.deltaUpdateThreadTheme","transform failed"])}f=b("bs_js_dict").get(c,"deltaUpdateSavedMessage");if(f!==void 0&&!d){d=!0;f=J(a,b("bs_caml_option").valFromOption(f));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaUpdateSavedMessage",h):e[0]=b("bs_block").__(1,["DeltaClientDelta.deltaUpdateSavedMessage","transform failed"])}f=b("bs_js_dict").get(c,"deltaUpdatePinnedThread");if(f!==void 0&&!d){d=!0;f=I(a,b("bs_caml_option").valFromOption(f));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaUpdatePinnedThread",h):e[0]=b("bs_block").__(1,["DeltaClientDelta.deltaUpdatePinnedThread","transform failed"])}f=b("bs_js_dict").get(c,"deltaUpdatePinnedMessage");if(f!==void 0&&!d){f=b("bs_caml_option").valFromOption(f);d=!0;var g=f.pinnedMessageAction===0;if(g)G(a,f,e);else{g=H(a,f);g!==void 0?q(a,b("bs_caml_option").valFromOption(g),"DeltaClientDelta.deltaUpdatePinnedMessage",h):e[0]=b("bs_block").__(1,["DeltaClientDelta.deltaUpdatePinnedMessage","transform failed"])}}f=b("bs_js_dict").get(c,"deltaUpdatePrivateGroupJoinableLink");if(f!==void 0&&!d){d=!0;g=K(a,b("bs_caml_option").valFromOption(f));g!==void 0?q(a,b("bs_caml_option").valFromOption(g),"DeltaClientDelta.deltaUpdatePrivateGroupJoinableLink",h):e[0]=b("bs_block").__(1,["DeltaClientDelta.deltaUpdatePrivateGroupJoinableLink","transform failed"])}f=b("bs_js_dict").get(c,"deltaOmniMDirectivesV2");if(f!==void 0&&!d){d=!0;g=L(b("bs_caml_option").valFromOption(f));if(g!==void 0){f=b("bs_caml_option").valFromOption(g);e[0]=b("bs_block").__(0,["DeltaClientDelta.deltaOmniMDirectivesV2"]);b("MSuggestionActions").saveAllSuggestions(f.thread_id,f.suggestions)}else e[0]=b("bs_block").__(1,["DeltaClientDelta.deltaOmniMDirectivesV2","transform failed"])}g=b("bs_js_dict").get(c,"deltaPromoteGroupThreadAdmin");if(g!==void 0&&!d){d=!0;f=M(a,b("bs_caml_option").valFromOption(g));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaPromoteGroupThreadAdmin",h):e[0]=b("bs_block").__(1,["DeltaClientDelta.deltaPromoteGroupThreadAdmin","transform failed"])}g=b("bs_js_dict").get(c,"deltaRecallMessageData");if(g!==void 0&&!d){d=!0;f=N(a,b("bs_caml_option").valFromOption(g));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaRecallMessageData",h):e[0]=b("bs_block").__(1,["DeltaClientDelta.deltaRecallMessageData","transform failed"])}g=b("bs_js_dict").get(c,"deltaPageUnSubscribeStatus");if(g!==void 0&&!d){d=!0;f=O(a,b("bs_caml_option").valFromOption(g));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaPageUnSubscribeStatus",h):e[0]=b("bs_block").__(1,["DeltaClientDelta.deltaPageUnSubscribeStatus","transform failed"])}g=b("bs_js_dict").get(c,"deltaPageBlurredImageStatus");if(g!==void 0&&!d){d=!0;f=P(a,b("bs_caml_option").valFromOption(g));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaPageBlurredImageStatus",h):e[0]=b("bs_block").__(1,["DeltaClientDelta.deltaPageBlurredImageStatus","transform failed"])}g=b("bs_js_dict").get(c,"deltaPaymentPinProtectionStatusData");if(g!==void 0){if(!d){d=!0;f=Q(a,b("bs_caml_option").valFromOption(g));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaPaymentPinProtectionStatusData",h):e[0]=b("bs_block").__(1,["DeltaClientDelta.deltaPaymentPinProtectionStatusData","transform failed"])}}else d||(e[0]=b("bs_block").__(1,["DeltaClientDelta","unknown delta type: "+Object.keys(c).join(",")]));g=b("bs_js_dict").get(c,"deltaThreadConnectivityStatusUpdate");if(g!==void 0){if(!d){d=!0;f=R(a,b("bs_caml_option").valFromOption(g));f!==void 0?q(a,b("bs_caml_option").valFromOption(f),"DeltaClientDelta.deltaThreadConnectivityStatusUpdateData",h):e[0]=b("bs_block").__(1,["DeltaClientDelta.deltaThreadConnectivityStatusUpdateData","transform failed"])}}else d||(e[0]=b("bs_block").__(1,["DeltaClientDelta","unknown delta type: "+Object.keys(c).join(",")]));return e[0]}}else return b("bs_block").__(1,["DeltaClientDelta","client delta is missing"])}}else return b("bs_block").__(1,["DeltaClientDelta","client delta has no deltas"])}}function U(a,c){var d=[],e=[],f=c.folders,g=0;f==null||f.length===0?g=1:b("bs_belt_Array").forEachU(f,function(a){d.push({action_type:b("MercuryGlobalActionType").MARK_ALL_READ,action_id:null,folder:b("bs_js_dict").get(b("MessagingTag").IRIS_MAPPING,a),timestamp:parseInt(c.watermarkTimestamp,10)});return 0});g===1&&b("bs_belt_Array").forEachU(c.threadKeys,function(f){var d=i(a,f);if(d!==void 0){var g=parseInt(c.watermarkTimestamp,10);b("MercuryServerRequests").getForFBID(a).updateLastActionTimestamp(g);e.push({thread_id:d,action_type:b("MercuryActionType").CHANGE_READ_STATUS,other_user_fbid:f.otherUserFbId,thread_fbid:f.threadFbId,mark_as_read:!0,timestamp:g,folder:b("MessagingTag").INBOX});return 0}else return 0});return[d,e]}function V(a){if(a==null)return null;else return a.toString()}function W(a){a=a.skipBumpThread;if(!(a==null)&&a)return h;else return 1}function X(a,c){var d;switch(c.tag|0){case 0:var e=c[0],f=k(a,e);q(a,f,"deltaNewMessage",W(e.messageMetadata));d=0;break;case 1:f=c[0];q(a,Object.assign(k(a,f.newMessage),{action_type:b("MercuryActionType").REPLACE_MESSAGE,replaced_message_id:f.replacedMessageId}),"deltaReplaceMessage",h);d=0;break;case 2:e=c[0];f=e.threadKey.otherUserFbId;var g;if(f==null){var j=e.threadKey.threadFbId;if(j==null)g=void 0;else{var l=b("MercuryThreadIDMap").getForFBID(a);l=l.getClientIDFromServerIDNow(j.toString());g=l==null?void 0:b("bs_caml_option").some(l)}}else{j=b("FBID.bs").ofString(f.toString());g=j!==void 0?b("bs_caml_option").some(b("MercuryIDs").getThreadIDFromUserID(b("bs_caml_option").valFromOption(j))):void 0}if(g!==void 0){l={};f=parseInt(e.deliveredWatermarkTimestampMs,10);l[b("bs_caml_option").valFromOption(g)]=f;b("MercuryDispatcher").getForFBID(a).handleUpdate({delivery_receipts:l,pinned_thread_ids:[],newlyAddedClientIDs:{},actions:[],preprocessed:!0});d=b("bs_block").__(0,["DeltaDeliveryReceipt"])}else d=b("bs_block").__(1,["DeltaDeliveryReceipt","no thread id"]);break;case 3:j=U(a,c[0]);e=j[1];g=j[0];g.length!==0&&b("MercuryDispatcher").getForFBID(a).handleUpdate({actions:[],global_actions:g,pinned_thread_ids:[],newlyAddedClientIDs:{},preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});e.length!==0&&b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:e,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d=g.length===0&&e.length===0?b("bs_block").__(1,["DeltaMarkRead","no local or global action"]):b("bs_block").__(0,["DeltaMarkRead"]);break;case 4:var m=c[0];f=b("bs_belt_Array").keepMapU(m.threadKeys,function(c){var d=i(a,c);if(d!==void 0){var e=parseInt(m.watermarkTimestamp,10);b("MercuryServerRequests").getForFBID(a).updateLastActionTimestamp(e);return{thread_id:d,action_type:b("MercuryActionType").CHANGE_READ_STATUS,other_user_fbid:c.otherUserFbId,thread_fbid:c.threadFbId,mark_as_read:!1,timestamp:e,folder:b("MessagingTag").INBOX}}});b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:f,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d=b("bs_block").__(0,["DeltaMarkUnread"]);break;case 5:l=c[0];q(a,Object.assign(k(a,l),{action_type:b("MercuryActionType").LOG_MESSAGE,log_message_body:l.messageMetadata.adminText,log_message_data:{removed_participants:[b("MercuryIDs").getParticipantIDFromUserID(l.leftParticipantFbId)]},log_message_type:b("MercuryLogMessageType").UNSUBSCRIBE}),"DeltaParticipantLeftGroupThread",W(l.messageMetadata));d=0;break;case 6:j=c[0];q(a,Object.assign(k(a,j),{action_type:b("MercuryActionType").LOG_MESSAGE,log_message_body:j.messageMetadata.adminText,log_message_data:{added_participants:b("bs_belt_Array").map(j.addedParticipants,function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.userFbId)})},log_message_type:b("MercuryLogMessageType").SUBSCRIBE}),"DeltaParticipantsAddedToGroupThread",W(j.messageMetadata));d=0;break;case 7:g=c[0];q(a,Object.assign(k(a,g),{action_type:b("MercuryActionType").LOG_MESSAGE,log_message_body:g.messageMetadata.adminText,log_message_data:{name:g.name},log_message_type:b("MercuryLogMessageType").THREAD_NAME}),"DeltaThreadName",W(g.messageMetadata));d=0;break;case 8:e=c[0];f={watermark:parseInt(e.watermarkTimestampMs,10),action:parseInt(e.actionTimestampMs,10)};l=e.threadKey.otherUserFbId;j=l==null?b("bs_caml_option").nullable_to_opt(e.actorFbId):l.toString();g=e.threadKey.otherUserFbId;if(g==null){l=e.threadKey.threadFbId;e=l==null?void 0:l.toString()}else e=g.toString();if(j!==void 0)if(e!==void 0){l=e;g=b("MercuryThreadIDMap").getForFBID(a);e=g.getClientIDFromServerIDNow(l);if(e==null)d=b("bs_block").__(1,["DeltaReadReceipt","No clientID for serverID: "+l]);else{g={};l={};j=b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(j));l[j]=f;g[e]=l;b("MercuryDispatcher").getForFBID(a).handleUpdate({roger:g,pinned_thread_ids:[],newlyAddedClientIDs:{},actions:[],preprocessed:!0});d=b("bs_block").__(0,["DeltaReadReceipt"])}}else d=b("bs_block").__(1,["DeltaReadReceipt","serverID is invalid"]);else d=b("bs_block").__(1,["DeltaReadReceipt","userID is invalid"]);break;case 9:j=c[0];q(a,Object.assign(k(a,j),{action_type:b("MercuryActionType").LOG_MESSAGE,log_message_body:j.messageMetadata.adminText,log_message_data:{message_type:j.type,untypedData:j.untypedData},log_message_type:b("MercuryLogMessageType").GENERIC_ADMIN_TEXT,message_unsendability_status:b("MessageUnsendabilityStatus.bs").fromNullableString(j.messageMetadata.unsendType)}),"DeltaAdminTextMessage",W(j.messageMetadata));d=0;break;case 10:f=c[0];e=i(a,{otherUserFbId:f.threadKey.otherUserFbId,threadFbId:f.threadKey.threadFbId});l=e!==void 0?{action_type:b("MercuryActionType").DELETE_MESSAGES,message_ids:f.messageIds,other_user_fbid:V(f.threadKey.otherUserFbId),thread_fbid:V(f.threadKey.threadFbId),thread_id:e}:void 0;g=f.threadKey.threadFbId;j=f.folder;if(l!==void 0){e=b("bs_caml_option").valFromOption(l);g==null||j==null?(q(a,e,"DeltaMessageDelete",h),d=0):(j==="FOLDER_MONTAGE"?b("MontageActions").requestUpdate(g.toString()):q(a,e,"DeltaMessageDelete",h),d=0)}else d=b("bs_block").__(1,["DeltaMessageDelete","transform failed"]);break;case 11:f=c[0];l=i(a,{otherUserFbId:f.threadKey.otherUserFbId,threadFbId:f.threadKey.threadFbId});if(l!==void 0){j=f.action;q(a,{action_type:b("MercuryActionType").CHANGE_ARCHIVED_STATUS,thread_fbid:V(f.threadKey.threadFbId),other_user_fbid:V(f.threadKey.otherUserFbId),archived:j==null?!1:j===b("MessagingThreadAction").ACTION_ARCHIVED,thread_id:l},"DeltaThreadAction",h);d=0}else d=b("bs_block").__(1,["DeltaThreadAction","transform failed"]);break;case 12:g=b("bs_belt_Array").keepMapU(c[0].threadKeys,function(c){var d=i(a,c);if(d!==void 0)return{thread_id:d,action_type:b("MercuryActionType").DELETE_THREAD,other_user_fbid:c.otherUserFbId,thread_fbid:c.threadFbId}});b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:g,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d=b("bs_block").__(0,["DeltaThreadDelete"]);break;case 13:e=c[0];f=i(a,{otherUserFbId:null,threadFbId:e.messageMetadata.threadKey.threadFbId});f!==void 0?(q(a,{action_type:b("MercuryActionType").REMOVE_GROUP_ADMINS,action_id:null,thread_fbid:V(e.messageMetadata.threadKey.threadFbId),other_user_fbid:null,removed_admin_ids:e.removedAdminFbIds,thread_id:f},"DeltaAdminRemovedFromGroupThread",h),d=0):d=b("bs_block").__(1,["DeltaAdminRemovedFromGroupThread","transform failed"]);break;case 14:j=c[0];l=i(a,j.threadKey);if(l!==void 0){g=[{thread_id:l,action_type:b("MercuryActionType").CHANGE_MUTE_SETTINGS,thread_fbid:j.threadKey.threadFbId,other_user_fbid:j.threadKey.otherUserFbId,mute_until:parseInt(j.expireTime,10)}];b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:g,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d=b("bs_block").__(0,["DeltaThreadMuteSettings"])}else d=b("bs_block").__(1,["DeltaThreadMuteSettings","invalid thread ID"]);break;case 15:e=c[0];f=e.jsonBlob;if(f==null)d=b("bs_block").__(1,["DeltaPagesManagerEvent","no jsonBlob"]);else{try{l=JSON.parse(f)}catch(a){l={}}j=b("bs_js_json").classify(l);if(typeof j==="number"||j.tag!==2)d=b("bs_block").__(1,["DeltaPagesManagerEvent","jsonBlob is not an object"]);else{g=j[0];f=b("bs_js_dict").get(g,"type");if(f!==void 0){l=b("bs_js_json").classify(b("bs_caml_option").valFromOption(f));if(typeof l==="number"||l.tag!==1)d=b("bs_block").__(1,["DeltaPagesManagerEvent","type is not a number"]);else if(l[0]===b("PagesMessagingEventType").FLAG){j=b("bs_js_dict").get(g,"flagData");if(j!==void 0){f=b("bs_js_json").classify(b("bs_caml_option").valFromOption(j));if(typeof f==="number"||f.tag!==2)l=!1;else{g=b("bs_js_dict").get(f[0],"state");if(g!==void 0){j=b("bs_js_json").classify(b("bs_caml_option").valFromOption(g));l=typeof j==="number"?j===1:!1}else l=!1}}else l=!1;f=i(a,e.threadKey);if(f!==void 0){g=[{thread_id:f,action_type:b("MercuryActionType").CHANGE_FLAG,mark_as_flag:l,other_user_fbid:e.threadKey.otherUserFbId,thread_fbid:e.threadKey.threadFbId}];b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:g,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d=b("bs_block").__(0,["DeltaPagesManagerEvent"])}else d=b("bs_block").__(1,["DeltaPagesManagerEvent","threadID is invalid"])}else d=b("bs_block").__(1,["DeltaPagesManagerEvent","type is not pagesFlag"])}else d=b("bs_block").__(1,["DeltaPagesManagerEvent","no type on jsonBlob"])}}break;case 16:j=c[0];f=i(a,{otherUserFbId:null,threadFbId:j.messageMetadata.threadKey.threadFbId});f!==void 0?(q(a,{action_type:b("MercuryActionType").APPROVAL_MODE,action_id:null,thread_fbid:V(j.messageMetadata.threadKey.threadFbId),other_user_fbid:null,approval_mode:b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(b("MessengerApprovalModeTypes"),j.mode)),thread_id:f},"DeltaApprovalMode",h),d=0):d=b("bs_block").__(1,["DeltaApprovalMode","transform failed"]);break;case 17:l=c[0];e=i(a,{otherUserFbId:l.messageMetadata.threadKey.otherUserFbId,threadFbId:l.messageMetadata.threadKey.threadFbId});if(e!==void 0){g=e;j=l.inviterFbId;if(j==null){f=l.recipientFbId;if(!(f==null)){e=b("MercuryIDs").getParticipantIDFromUserID(b("FBID.bs").ofStringExn(f));f=l.action===b("MessengerApprovalQueueTypes").REMOVED;var p=l.action===b("MessengerApprovalQueueTypes").REQUESTED;q(a,{action_type:b("MercuryActionType").APPROVAL_QUEUE,action_id:null,thread_fbid:V(l.messageMetadata.threadKey.threadFbId),other_user_fbid:V(l.messageMetadata.threadKey.otherUserFbId),removed_id:f?e:null,added_id:p?e:null,thread_id:g},"DeltaApprovalQueue",h)}}else{f=l.action===b("MessengerApprovalQueueTypes").REMOVED;p=l.action===b("MessengerApprovalQueueTypes").REQUESTED;if(p){e=l.requestSource;var r;if(e==null)r=b("MessengerGroupRequestSource").ADD;else switch(e){case"ADD":r=b("MessengerGroupRequestSource").ADD;break;case"JOIN_THROUGH_LINK":r=b("MessengerGroupRequestSource").JOIN_THROUGH_LINK;break;default:r=b("MessengerGroupRequestSource").ADD}p={requester:{id:l.recipientFbId},inviter:{id:j},request_source:r,request_timestamp:l.requestTimestamp}}else p=null;q(a,{action_type:b("MercuryActionType").APPROVAL_QUEUE,action_id:null,thread_fbid:V(l.messageMetadata.threadKey.threadFbId),other_user_fbid:V(l.messageMetadata.threadKey.otherUserFbId),removed_group_id:f?l.recipientFbId:null,added_group_id:p,thread_id:g},"DeltaApprovalQueue",h)}d=0}else d=b("bs_block").__(1,["DeltaApprovalQueue","transform failed"]);break;case 18:e=c[0];q(a,k(a,e.deltaNewMessage),"DeltaGenieMessage",W(e.deltaNewMessage.messageMetadata));d=0;break;case 19:j=c[0];f=j.messageMetadata.threadKey;if(f==null)l=void 0;else{p=f.threadFbId;l=p==null?void 0:p}g=j.initiator;if(g==null)e=void 0;else{f=g.userFbId;e=f==null?void 0:f.toString()}p=i(a,{otherUserFbId:null,threadFbId:l});p!==void 0?(q(a,{action_type:b("MercuryActionType").UPDATE_RTC_CALL_DATA,thread_fbid:V(l),other_user_fbid:null,call_state:j.callState,server_info_data:j.serverInfoData,initiator_fbid:e,thread_id:p},"DeltaRTCCallData",h),d=0):d=b("bs_block").__(1,["DeltaRTCCallData","transform failed"]);break;case 20:g=c[0];f=i(a,g.threadKey);if(f!==void 0){l=[{thread_id:f,action_type:b("MercuryActionType").CHANGE_FOLDER,other_user_fbid:g.threadKey.otherUserFbId,new_folder:b("bs_js_dict").get(b("MessagingTag").IRIS_MAPPING,g.folder)}];b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:l,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d=b("bs_block").__(0,["DeltaThreadFolder"])}else d=b("bs_block").__(1,["DeltaThreadFolder","threadID is invalid"]);break;case 21:j=c[0];e=i(a,j.threadKey);if(e!==void 0){p=[{thread_id:e,action_type:b("MercuryActionType").MUTATE_TAGS,messageId:j.messageId,tags_to_add:j.tagsToAdd,tags_to_delete:j.tagsToDelete}];b("MercuryDispatcher").getForFBID(a).handleUpdate({pinned_thread_ids:[],newlyAddedClientIDs:{},actions:p,preprocessed:!0,payload_source:b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE});d=b("bs_block").__(0,["DeltaMutateMessageTags"])}else d=b("bs_block").__(1,["DeltaMutateMessageTags","threadID is invalid"]);break;case 22:d=T(a,c[0]);break}if(typeof d==="number")return 0;else if(d.tag)return o(d[0],d[1]);else return n(d[0])}function a(a,c){if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").NewMessage))return X(a,b("bs_block").__(0,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ReplaceMessage))return X(a,b("bs_block").__(1,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").DeliveryReceipt))return X(a,b("bs_block").__(2,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").MarkRead))return X(a,b("bs_block").__(3,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").MarkUnread))return X(a,b("bs_block").__(4,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ParticipantLeftGroupThread))return X(a,b("bs_block").__(5,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ParticipantsAddedToGroupThread))return X(a,b("bs_block").__(6,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ThreadName))return X(a,b("bs_block").__(7,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ReadReceipt))return X(a,b("bs_block").__(8,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").AdminTextMessage))return X(a,b("bs_block").__(9,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").MessageDelete))return X(a,b("bs_block").__(10,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ThreadAction))return X(a,b("bs_block").__(11,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ThreadDelete))return X(a,b("bs_block").__(12,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").AdminRemovedFromGroupThread))return X(a,b("bs_block").__(13,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ThreadMuteSettings))return X(a,b("bs_block").__(14,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").PagesManagerEvent))return X(a,b("bs_block").__(15,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ApprovalMode))return X(a,b("bs_block").__(16,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ApprovalQueue))return X(a,b("bs_block").__(17,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ClientPayload))return X(a,b("bs_block").__(22,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").GenieMessage))return X(a,b("bs_block").__(18,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").RtcCallData))return X(a,b("bs_block").__(19,[c]));else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").MarkFolderSeen)){n("DeltaMarkFolderSeen");return b("MessengerState.bs").send(b("bs_caml_option").some(a),[b("bs_block").__(0,[b("bs_block").__(66,[c])])])}else if(b("bs_caml_obj").caml_equal(c["class"],b("MercurySyncDeltaTypes").ThreadFolder))return X(a,b("bs_block").__(20,[c]));else return 0}f.transform=a}),null);
__d("ThreadConnectivityStatusGraphQLType.bs",[],(function(a,b,c,d,e,f){"use strict";a="UNCONNECTED";b="IMPLICIT_OR_TWO_WAY_MESSAGING";f.unconnected=a;f.implicitOrTwoWayMessaging=b}),null);
__d("ThreadConnectivityStatusGraphQLType.re",["ThreadConnectivityStatusGraphQLType.bs"],(function(a,b,c,d,e,f){a=b("ThreadConnectivityStatusGraphQLType.bs").unconnected;f.unconnected=a;c=b("ThreadConnectivityStatusGraphQLType.bs").implicitOrTwoWayMessaging;f.implicitOrTwoWayMessaging=c}),null);
__d("Utils.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a==null)return!1;else return a}function b(a){if(a!==void 0)return a;else return!1}f.isTruthy=a;f.optionBoolToBool=b}),null);
__d("MessengerThreadUtils.bs",["FBID.bs","bs_caml_obj","MercuryIDs","CurrentUser","MessagingTag","ImmutableObject","MessengerParticipants.bs","MercuryParticipantTypes","MessengerJoinableModeType","MessengerObjectAssociationType","MessengerThreadCannotReplyReason"],(function(a,b,c,d,e,f){"use strict";function g(a,c){return c.filter(function(c){return b("bs_caml_obj").caml_notequal(c,a)}).length<=1}function h(a,c,d,e){var f=b("MercuryIDs").tokenize(c),h=f.type;f=f.value;var i=d.find(function(b){return b!==a});i=i!==void 0?b("MessengerParticipants.bs").getNow(i):null;var j=b("CurrentUser").isWorkUser();j=!(i==null)&&j&&i.work_foreign_entity_info==null&&i.user_type===b("MercuryParticipantTypes").USER?[!1,b("MessengerThreadCannotReplyReason").RECIPIENTS_INVALID]:[!0,null];i=h==="user";return new(b("ImmutableObject"))({thread_id:c,participants:Array.from(d),admins:{},name:"",snippet:"",snippet_sender:null,unread_count:e==null?0:e,message_count:0,image_src:null,timestamp:0,other_user_fbid:i?b("FBID.bs").ofStringExn(f):null,is_canonical_user:h==="user",is_canonical:g(a,d),is_subscribed:!0,folder:b("MessagingTag").INBOX,is_archived:!1,is_page_follow_up:!1,is_page_unresponded_thread:!1,admin_model_status:null,approval_mode:0,approval_queue_ids:[],associated_object:null,can_reply:j[0],cannot_reply_reason:j[1],can_viewer_report:!1,comm_item_owners:null,comm_source_id:null,comm_status:null,comm_icon_type:[],custom_like_icon:null,custom_nickname:null,customization_enabled:!1,description:null,ephemeral_ttl_mode:0,footer_color:null,game_id:null,group_approval_queue:null,work_associated_group:null,pinned_messages:null,groups_sync_status:null,group_thread_subtype:null,has_email_participant:!1,has_montage:!1,unread_mentions_count:0,header_color:null,is_canonical_neo_user:!1,is_from_weak_entry_point:!1,is_pin_protected:!1,is_pinned:!1,is_thread_queue_enabled:!1,joinable_mode:{mode:0,link:""},last_message_timestamp:0,last_message_id:null,last_message_type:null,last_read_timestamp:0,last_message_admin_text_type:null,last_message_unsendability_status:null,lightweight_event:null,lightweight_events:{},marketplace_thread_data:null,mentions_mute_mode:0,mute_until:null,object_association_type:null,page_comm_item_id:null,page_thread_info:null,page_unsubscribe_status:!1,participant_add_mode:null,participants_event_status:null,reactions_mute_mode:0,read_only:!1,recipients_loadable:!1,rtc_call_data:null,server_timestamp:0,snippet_attachments:[],solid_color:null,subtitle:null,theme_id:null,reactions:void 0,thread_connectivity_data:null,thread_fbid:null,thread_pin_timestamp:null,thread_type:null,thread_unsendability_status:null,gradient_colors:[],accessibility_label:null,reverse_gradients_for_radial:null,joinable_link:null,linked_mentorship_programs:null,is_business_page_active:!1,thread_associated_job_applications:null,thread_associated_page_admin:null,graphql_token:null})}function a(a,c,d,e){a=h(a,c,d,null);return b("ImmutableObject").set(a,{associated_object:e,name:e.name,joinable_mode:{mode:b("MessengerJoinableModeType").JOINABLE,link:""},object_association_type:b("MessengerObjectAssociationType").GENERAL_CHAT})}f.isCanonicalFromInitialParticipants=g;f.createNewLocalThread=h;f.createNewLocalGroupGeneralThread=a}),null);
__d("ParticipantId.bs",["bs_string","bs_belt_Id"],(function(a,b,c,d,e,f){"use strict";a=b("bs_string").compare;c=b("bs_belt_Id").MakeComparable({cmp:a});d=c.cmp;f.cmp=d}),null);
__d("ThreadConnectivityStatus.bs",["bs_caml_obj","ThreadConnectivityStatus","ThreadConnectivityStatusGraphQLType.bs"],(function(a,b,c,d,e,f){"use strict";function a(a){a=b("bs_caml_obj").caml_equal(a,b("ThreadConnectivityStatus").UNCONNECTED);if(a)return b("ThreadConnectivityStatusGraphQLType.bs").unconnected;else return b("ThreadConnectivityStatusGraphQLType.bs").implicitOrTwoWayMessaging}f.toGraphQLValue=a}),null);
__d("ThreadId.bs",["bs_string","bs_belt_Id"],(function(a,b,c,d,e,f){"use strict";a=b("bs_string").compare;c=b("bs_belt_Id").MakeComparable({cmp:a});d=c.cmp;f.cmp=d}),null);
__d("MessengerTypingUtils.bs",["bs_belt_Map","bs_caml_option"],(function(a,b,c,d,e,f){"use strict";function a(a){if(a!==void 0)return b("bs_belt_Map").keysToArray(b("bs_caml_option").valFromOption(a));else return[]}f.getTypingUserIDs=a}),null);
__d("MessengerUploadFilesUtil.bs",["bs_curry","FantaTypeFileUploader"],(function(a,b,c,d,e,f){"use strict";e=(d={},d[(e=b("FantaTypeFileUploader")).fileTypes.ANIMATED_IMAGE]="gif_ids",d[e.fileTypes.AUDIO]="audio_ids",d[e.fileTypes.FILE]="file_ids",d[e.fileTypes.GENERIC_ATTACHMENT]="generic_attachment_ids",d[e.fileTypes.IMAGE]="image_ids",d[e.fileTypes.VIDEO]="video_ids",d);function a(a,b){if(a==null)return null;else{a=a.getTypeIDs(b);if(a.length>0)return a;else return null}}function g(a){if(a==null)return;else{a=a.get("uploadedFiles");var b=[],c=[];a.forEach(function(a,d,e){d=a.file;if(d.type.startsWith("image/")){b.push(d);return 0}else{c.push(d);return 0}});return[b,c]}}function h(a,c){if(c.length>0)return b("bs_curry")._1(a,c);else return 0}function c(a,b){if(a==null||b==null)return 0;else{a=g(a);if(a!==void 0){a=a;h(b,a[0]);a[1].forEach(function(a){return h(b,[a])});return 0}else return 0}}f.supportAttachments=e;f.getAttachmentIDs=a;f.getAttachments=g;f.sendAttchment=h;f.sendAttchments=c}),null);
__d("OnlineUserIds.bs",["bs_belt_Set","ParticipantId.bs"],(function(a,b,c,d,e,f){"use strict";function a(a){return b("bs_belt_Set").make(b("ParticipantId.bs"))}function c(a){return b("bs_belt_Set").fromArray(a,b("ParticipantId.bs"))}f.make=a;f.fromArray=c}),null);
__d("XUICloseButtonReact.bs",["ReasonReact.bs","bs_js_null_undefined","XUICloseButton.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g){var h;switch(d){case 0:h="small";break;case 1:h="medium";break;case 2:h="large";break}return b("ReasonReact.bs").wrapJsForReason(b("XUICloseButton.react"),{className:b("bs_js_null_undefined").fromOption(a),onClick:e,tooltip:b("bs_js_null_undefined").fromOption(f),shade:c?"dark":"light",size:h},g)}f.make=a}),null);
__d("ReplyingToMessageFallbackReact.bs",["cx","fbt","React","ReasonReact.bs","XUICloseButtonReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");c=b("ReasonReact.bs").statelessComponent("ReplyingToMessageFallbackReact");function a(a){var c=a.onCancelReplyingToMessage;a=a.isChatTab;return i.createElement("div",{className:(a?"_692o":"")+" _67tu"},b("ReasonReact.bs").element(void 0,void 0,b("XUICloseButtonReact.bs").make("_67tv",1,a?1:2,c,void 0,[])),h._("Respondendo \u00e0 mensagem"))}d=a;e=a;f.component=c;f.make=d;f.jsComponent=e}),null);
__d("SkinToneEmoji.bs",["bs_caml_array","EmojiFormat.bs","MessengerEmojiConfig"],(function(a,b,c,d,e,f){"use strict";function g(a){switch(a){case"1f385":case"1f3c3":case"1f3c4":case"1f3ca":case"1f3cb":case"1f442":case"1f443":case"1f446":case"1f447":case"1f448":case"1f449":case"1f44a":case"1f44b":case"1f44c":case"1f44d":case"1f44e":case"1f44f":case"1f450":case"1f466":case"1f467":case"1f468":case"1f469":case"1f46e":case"1f470":case"1f471":case"1f472":case"1f473":case"1f474":case"1f475":case"1f476":case"1f477":case"1f478":case"1f47c":case"1f481":case"1f482":case"1f483":case"1f485":case"1f486":case"1f487":case"1f4aa":case"1f575":case"1f590":case"1f595":case"1f596":case"1f645":case"1f646":case"1f647":case"1f64b":case"1f64c":case"1f64d":case"1f64e":case"1f64f":case"1f6a3":case"1f6b4":case"1f6b5":case"1f6b6":case"1f6c0":case"1f918":case"261d":case"26f9":case"270a":case"270b":case"270c":case"270d":return!0;default:return!1}}function h(a){var c=b("bs_caml_array").caml_array_get(a,a.length-1|0)===65039;if(c)return b("bs_caml_array").caml_array_get(a,a.length-1|0);else return 0}function i(a){if(b("bs_caml_array").caml_array_get(a,a.length-1|0)===65039)return a;else{a=a.slice(0);return a.concat([65039])}}function j(a){var b=h(a)===0;if(b)return a;else return a.slice(0,a.length-1|0)}function k(a){var c=b("MessengerEmojiConfig").emoji_colors;c=c.filter(function(b){return b===a});return c.length!==0}function l(a){a=j(a);if(a.length<=1||!k(b("bs_caml_array").caml_array_get(a,a.length-1|0)))return 0;else return b("bs_caml_array").caml_array_get(a,a.length-1|0)}function m(a){var b=h(a),c=b===0;c=c?l(a):l(a.slice(0,a.length-1|0));if(c!==0){c=b===0;if(c)return a.slice(0,a.length-1|0);else return i(a.slice(0,a.length-2|0))}else return a}function a(a,b){if(b!==0){var c=h(a),d=c===0;d=d?a.slice(0):a.slice(0,a.length-1|0);var e=l(d);if(e!==0)return a;else{e=d.concat([b]);d=c===0;if(d)return e;else return e.concat([c])}}else return a}function c(a){return m(j(a))}function d(a){return g(b("EmojiFormat.bs").codeArrayToCodeString(m(j(a))))}e=65039;f.emoji_modifier_code=e;f.emoji=g;f.getEmojiModifier=h;f.addEmojiModifier=i;f.removeEmojiModifier=j;f.isToneModifier=k;f.getTone=l;f.removeTone=m;f.applyTone=a;f.removeAllModifiers=c;f.hasVariations=d}),null);
__d("XUIBadgeReact.bs",["ReasonReact.bs","XUIBadge.react","bs_js_null_undefined"],(function(a,b,c,d,e,f){"use strict";function g(a){if(a!==void 0)if(a)return"regular";else return"special"}function a(a,c,d,e,f){var h;return b("ReasonReact.bs").wrapJsForReason(b("XUIBadge.react"),{className:(h=b("bs_js_null_undefined")).fromOption(c),count:h.fromOption(d),maxcount:h.fromOption(e),type:h.fromOption(g(a))},f)}f.stringOfBadgeType=g;f.make=a}),null);
__d("MessengerPersistantViewerKeyedSubscriptionComponent.bs",["bs_curry","React","bs_js_dict","bs_caml_option","CurrentUser","RemoteAction.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=[0],d={},e=function(a,c){a=a!==void 0?b("bs_caml_option").valFromOption(a):b("CurrentUser").getID();var e=b("bs_js_dict").get(d,a);if(e!==void 0)return b("RemoteAction.bs").send(e[0],c);else{e=f(a,void 0,0);return b("RemoteAction.bs").send(e[0],c)}},f=function(f,h,i){i=h!==void 0?b("bs_caml_option").valFromOption(h):b("RemoteAction.bs").create(0);var j=new Set(),k=[b("bs_curry")._1(a.initialState,f)];b("RemoteAction.bs").subscribe(function(c){var d=k[0];k[0]=b("bs_curry")._2(a.reducer,c,d);if(k[0]!==d){j.forEach(function(a){return b("bs_curry")._1(a[1],0)});return 0}else return 0},i);h=function(a,d){var e=g.useState(function(){return k[0]}),f=e[1],h=e[0],l=g.useCallback(function(c){if(a!==void 0)if(b("bs_curry")._2(a,h,k[0]))return b("bs_curry")._1(f,function(a){return k[0]});else return 0;else return b("bs_curry")._1(f,function(a){return k[0]})},[a,h,k[0]]);g.useEffect(function(){c[0]=c[0]+1|0;var a=c[0],d=[a,l];j.add(d);b("bs_curry")._1(l,0);return function(a){j["delete"](d);return 0}},[l]);return b("bs_curry")._1(d,h)};i=[i,h];d[f]=i;var l=b("bs_caml_option").some(f);b("bs_curry")._2(a.onFirstMount,f,function(a){return e(l,a)});return i},h=function(a){var c=a.shouldUpdate,e=a.remoteAction,g=a.fbid;a=a.children;g=g!==void 0?b("bs_caml_option").valFromOption(g):b("CurrentUser").getID();var h=b("bs_js_dict").get(d,g);if(h!==void 0)return b("bs_curry")._2(h[1],c,a);else return b("bs_curry")._2(f(g,e,0)[1],c,a)};h.displayName="MessengerPersistantViewerKeyedSubscriptionComponent("+(a.displayName+")");return{make:h,send:e}}f.Make=a}),null);
__d("MessengerPresenceProvider.bs",["FBID.bs","bs_curry","React","Arbiter","bs_belt_Set","bs_caml_obj","bs_belt_Array","MercuryIDs","bs_belt_Option","bs_caml_option","OnlineUserIds.bs","ParticipantId.bs","PresenceStatus","PresencePrivacy","AvailableListConstants","MessengerPersistantViewerKeyedSubscriptionComponent.bs"],(function(a,b,c,d,e,f){"use strict";var g=b("React"),h=["privacy-changed","privacy-availability-changed","privacy-user-presence-response"];function a(a){return b("OnlineUserIds.bs").make(0)}function c(a,c){if(a){a=a[0];var d=b("bs_caml_obj").caml_equal(b("PresenceStatus").get(a),b("AvailableListConstants").ACTIVE);if(d)return b("bs_belt_Set").add(c,b("MercuryIDs").getParticipantIDFromUserID(a));else return b("bs_belt_Set").remove(c,b("MercuryIDs").getParticipantIDFromUserID(a))}else return b("bs_belt_Set").fromArray(b("bs_belt_Array").map(b("PresenceStatus").getOnlineIDs(),function(a){return b("MercuryIDs").getParticipantIDFromUserID(a)}),b("ParticipantId.bs"))}function d(a,c){b("PresencePrivacy").subscribe(h,function(a){return b("bs_curry")._1(c,0)});b("bs_curry")._1(c,0);b("Arbiter").subscribe(b("AvailableListConstants").ON_AVAILABILITY_CHANGED,function(a,d){if(d==null)return 0;else{a=b("FBID.bs").ofStringExn(d);return b("bs_curry")._1(c,[a])}});return 0}a=b("MessengerPersistantViewerKeyedSubscriptionComponent.bs").Make({initialState:a,reducer:c,onFirstMount:d,displayName:"MessengerPresenceProvider"});var i=a.make;function j(a,c,d,e,f){f={children:e};a!==void 0&&(f.shouldUpdate=b("bs_caml_option").valFromOption(a));c!==void 0&&(f.remoteAction=b("bs_caml_option").valFromOption(c));d!==void 0&&(f.fbid=b("bs_caml_option").valFromOption(d));return f}function k(a){var c=a.subscribeToIDs,d=a.remoteAction,e=a.fbid;a=a.children;d=j(function(a,d){if(c!==void 0){var e;d=(e=b("bs_belt_Set")).union(e.diff(a,d),e.diff(d,a));return!e.isEmpty(e.intersect(d,b("bs_caml_option").valFromOption(c)))}else return!1},d,e,a,0);return g.createElement(i,d)}function e(a){var c=b("ParticipantId.bs"),d={children:a.children},e=b("bs_belt_Option").map(b("bs_caml_option").nullable_to_opt(a.subscribeToIDs),function(a){return b("bs_belt_Set").fromArray(a,c)});e!==void 0&&(d.subscribeToIDs=b("bs_caml_option").valFromOption(e));e=b("bs_caml_option").nullable_to_opt(a.fbid);e!==void 0&&(d.fbid=b("bs_caml_option").valFromOption(e));return k(d)}c=a.send;d=k;f.privacyEvents=h;f.send=c;f.makePropsOriginal=j;f.make=d;f.jsComponent=e}),null);
__d("MessengerReadReceipt.bs",["bs_array","Utils.bs","immutable","bs_caml_option","bs_belt_MapString","MercuryActionStatus"],(function(a,b,c,d,e,f){"use strict";function g(a,c,d,e){c=c>=a.timestamp;var f=a.status;e=!e||d!==a.author;if(c)if(f==null)if(e)return!0;else return!1;else if(e)return f===b("MercuryActionStatus").SUCCESS;else return!1;else return!1}function a(a,c,d){if(c==null)return[];else{a=b("bs_belt_MapString").get(a,c.thread_id);if(a!==void 0)return b("bs_caml_option").valFromOption(a).reduce(function(a,e,f,h){if(g(c,e.watermark,f,b("Utils.bs").isTruthy(d)))return b("bs_array").append(a,[f]);else return a},[]);else return[]}}function c(a,c){a=b("bs_belt_MapString").get(a,c.thread_id);if(a!==void 0)return b("bs_caml_option").valFromOption(a).reduce(function(a,b,d,e){if(a)return g(c,b.watermark,d,!1);else return!1},!0);else return!1}function d(a){return!b("bs_belt_MapString").isEmpty(a)}function e(a,c){if(b("bs_belt_MapString").isEmpty(a))return b("immutable").OrderedMap();else{a=b("bs_belt_MapString").get(a,c);if(a!==void 0)return b("bs_caml_option").valFromOption(a);else return b("immutable").OrderedMap()}}function h(a,c,d){a=b("bs_belt_MapString").get(a,c);if(a!==void 0){c=b("bs_caml_option").valFromOption(a).get(d);if(c==null)return null;else return c}else return null}var i=b("bs_belt_MapString").empty;f.emptyReadReceipts=i;f.wasSeen=g;f.getSeenBy=a;f.wasSeenByAll=c;f.hasReadReceipts=d;f.getSeenTimestamps=e;f.getSeenTimestamp=h}),null);